var bt=Object.defineProperty,xt=Object.defineProperties;var kt=Object.getOwnPropertyDescriptors;var Ve=Object.getOwnPropertySymbols;var Ct=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable;var De=(e,t,a)=>t in e?bt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,b=(e,t)=>{for(var a in t||(t={}))Ct.call(t,a)&&De(e,a,t[a]);if(Ve)for(var a of Ve(t))Ft.call(t,a)&&De(e,a,t[a]);return e},$=(e,t)=>xt(e,kt(t));var G=(e,t,a)=>(De(e,typeof t!="symbol"?t+"":t,a),a);import{l as Z,v as Re,m as Dt,a as He,r as k,w as ge,d as qe,b as c,o as v,c as D,e as g,t as P,f as z,g as l,h as V,F as R,i as ee,j as H,n as le,k as _e,p as C,q as _t,s as St,u as At,x as Et,y as L,z as Tt,A as Mt,B as Lt,C as Nt,D as Bt,E as oe,H as Se,G as te,I as me,J as ye,K as ve,L as Ke,M as jt,N as Pt,O as Ot,P as It,Q as Ut,R as $t,S as zt,T as Ge,U as Je,V as Vt,W as Rt,X as Ht,Y as qt,Z as Kt,_ as Gt,$ as Jt,a0 as Yt}from"./vendor.e9b64824.js";var Wt={domain:"http://192.168.1.60",defaultModule:"admin",wsApi:""};const Ye=(e,t,a,s,i=!1)=>{if(e=typeof e=="string"?e.split("."):[...e],e.length===1)i?t.splice(e[0],0,a):t[e[0]]=a;else{s&&t[e[0]][s]===void 0&&(t[e[0]][s]=[]);let n=s?t[e[0]][s]:t[e[0]];n||(n=typeof s=="number"?[]:{},s?t[e[0]][s]=n:t[e[0]]=n),Ye(e.slice(1),n,a,s,i)}},We=(e,t={},a,s=!1)=>(e=typeof e=="string"?e.split("."):[...e],e.length===0?!1:e.length===1?s?t.splice(e[0],1)[0]:t[e[0]]:We(e.slice(1),a===void 0?t[e[0]]:t[e[0]][a],a,s)),Qt=(e,t,a=t[0])=>e&&t.indexOf(e)!==-1?e:a,Xt=(e,t,a)=>{if(a!==void 0){for(let s=0;s<t.length;s++)if(t[s][a]===e)return s;return-1}else return t.indexOf(e)},we=(e={})=>{if(!(e instanceof Object))return e;const t=Array.isArray(e)?[]:{};for(const a in e)e.hasOwnProperty(a)&&(typeof e[a]=="object"?t[a]=we(e[a]):t[a]=e[a]);return t};var Zt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",recursionSetValue:Ye,recursionGetValue:We,verifyValueInArray:Qt,getInArrayIndex:Xt,deepCopy:we});const x={funcs:{},add(e,t){this.funcs[e]=this.funcs[e]||[],this.funcs[e].push(t)},remove(e,t){if(!t)delete this.funcs[e];else{const a=this.funcs[e];if(!a)return;a.every((s,i)=>s===t?(a.splice(i,1),!1):!0),a.length||delete this.funcs[e]}},emit(e,...t){(this.funcs[e]||[]).forEach(s=>s(...t))},is(e,t){if(t){const a=this.funcs[e];return a?a.every(s=>s===t):!1}else return!!this.funcs[e]}},re={key(e){return"request-"+e},add(e,t){x.add(this.key(e),t)},remove(e,t){x.remove(this.key(e),t)},emit(e,...t){x.emit(this.key(e),...t)},is(e,t){x.is(this.key(e),t)}},Qe={data:[],emit(e){var t;this.data=e,(t=this.callback)==null||t.call(this,e)},on(e){e(this.data),this.callback=e}},Ae=window.getXmlByTagName=(e,t,a=0)=>{const s=e.indexOf("<"+t,a);if(!~s)return;a=s+1;let i=-1,n=0;for(;!~i;){const f=e.indexOf("</"+t,a),d=e.indexOf("<"+t,a);if(~f&&(~d&&f<d||!~d))n===0?i=f:(a=f+1,n--);else if(~d&&(~f&&d<f||!~f))a=d+1,n++;else{console.error("xml\u7ED3\u6784\u9519\u8BEF \u6216\u8005\u6CA1\u6709\u627E\u5230\uFF1A"+t);return}}const o=e.indexOf(">",s),r=e.substr(s+t.length+2,o-(s+t.length+2)).trim();let u=r;const p={};for(;u.length;){const f=u.indexOf(" "),d=u.indexOf("=");if(!~f&&!~d)p[u]=!0,u="";else if(~f&&~d&&f<d||!~d){const m=u.substr(0,f);p[m]=!0,u=u.substr(m.length).trim()}else{const m=u.substr(0,d),A=u.substr(d+2,u.indexOf(u.substr(d+1,1),d+2)-d-2);p[m]=A,u=u.substr((m+A).length+3).trim()}}return{attrString:r,attr:p,child:e.substr(o+1,i-o-1),start:s,end:i+t.length+3,nextStart:o}},ce=window.getXmlByTagNames=(e,t,a,s=[])=>{const i=Ae(e,t,a);return i?(s.push(i),ce(e,t,i.nextStart,s)):s};window.addEventListener("popstate",e=>{be($(b({},e.state||{url:location.href.substr(location.origin.length)}),{agree:"popstate"}))});let Xe={};const be=(e={})=>{if(!e.url)return;e={agree:e.agree||"push",url:e.url,path:e.url.split("?")[0],params:Z.parse(e.url.split("?")[1]||""),pathChange:e.url.split("?")[0]!==Xe.path},Xe=e;const t=e.path.split("/");if(t.length<=2||t[2]===""){F.indexPage&&F.replace(F.indexPage);return}x.emit("router-change",e)},Ze=(e,t)=>{const a=[],s=new Promise((i,n)=>{a.push(i,n),E({header:b({"x-dux-sfc":"1"},t==="dialog"?{"x-dialog":"1"}:{}),errorMsg:t==="dialog",url:e.split("/").slice(2).join("/")},!0).then(o=>{i({type:typeof o=="string"?Ae(o,"html")?"html":"vue":"node",data:o})}).catch(n)});return s.abort=()=>{var i;(i=a[1])==null||i.call(a,{message:"\u53D6\u6D88\u8BF7\u6C42",code:1})},s},ue=(e=location.pathname,t={})=>{t=b(b({},Z.parse(e.split("?")[1]||"")),t);const a=Z.stringify(t);return e.split("?")[0]+(a?"?"+a:"")},F=window.router=(e,t)=>{var i;if(!e)return;const a=e.split(":");typeof a[1]=="string"&&!a[1]&&(a[1]=location.href.substr(location.origin.length));const s=a.length>1?a[0]:"push";(i=F[s])==null||i.call(F,a[1],t)};F.indexPage=null;F.push=(e,t)=>{e=ue(e,t);const a={url:e,agree:"push"};history.pushState(a,e,e),be(a)};F.routerPush=(e,t)=>{e=ue(e,t);const a={url:e,agree:"routerPush"};history.replaceState(a,e,e),be(a)};F.replace=(e,t)=>{e=ue(e,t);const a={url:e,agree:"replace"};history.replaceState(a,e,e),be(a)};F.back=e=>{const t=e|0||1;history.go(-t)};F.dialog=(e,t)=>{x.emit("router-dialog",{url:e,mode:t})};F.http=e=>{window.location.href=`http:${e}`};F.https=e=>{window.location.href=`https:${e}`};F.toVueComponent=(e,t={})=>(t.render=Re.compile(e),t);F.ajax=(e,t)=>{const a=()=>{E({url:ue(e,t),method:t==null?void 0:t._method,successMsg:!0,urlType:(t==null?void 0:t._urlType)||"absolute"}).then(s=>{t._callback&&t._callback(s),F("routerPush:"),x.emit("router-ajax-finish",{url:O(ue(e,t),(t==null?void 0:t._urlType)||"absolute"),data:t,result:s})})};(t==null?void 0:t._title)?window.dialog.info({title:"\u786E\u8BA4\u64CD\u4F5C",content:t==null?void 0:t._title,hideCancel:!1,onOk:a}):a()};const Y=()=>location.pathname.split("/")[1]||Wt.defaultModule,et=e=>["/",`/${Y()}`,`/${Y()}/`].includes(e),W={load:{},pageLoad:{},loadTypeString:{css:e=>ce(e,"link").filter(t=>t.attr.href).map(t=>t.attr.href),style:e=>ce(e,"style").map(t=>t.child),script:(e,t)=>ce(e,"script").filter(a=>a.attr.src&&(t?a.attr.async:!a.attr.async)).map(a=>a.attr.src),scriptString:()=>[]},getLoadType(e,t,a){return typeof e=="string"?this.loadTypeString[t](e,a):typeof e=="object"?a?[]:t==="style"||t==="scriptString"?e[t]?[e[t]]:[]:e[t]||[]:[]},async pageLoad(e,t,a){const s=this.pageLoad[t]={num:0,list:[]},i=a?[this.loadScript(this.getLoadType(e,"script",!0)),this.loadScriptString(this.getLoadType(e,"scriptString",!0))]:[this.loadCss(this.getLoadType(e,"css")),this.loadStyle(this.getLoadType(e,"style")),this.loadScript(this.getLoadType(e,"script")),this.loadScriptString(this.getLoadType(e,"scriptString"))],n=await Promise.all(i);s.list.push(...n.map(o=>o.map(r=>r[0])).flat()),s.num++},uninstall(e,t=1){const a=this.pageLoad[e];if(!a||a.num>t)return;const s=new Set(Object.keys(this.pageLoad).map(i=>i===e?[]:this.pageLoad[i].list).flat());a.list.forEach(i=>{var n,o,r,u;s.has(i)||((u=(r=(o=(n=this.load[i])==null?void 0:n.source)==null?void 0:o.parentNode)==null?void 0:r.removeChild)==null||u.call(r,this.load[i].source),delete this.load[i])}),delete this.pageLoad[e]},loadScriptString(e){return e.forEach(t=>new Function(t)),Promise.resolve([])},loadScript(e){const t=e.filter(s=>!this.load[s]),a=[];return t.length?new Promise((s,i)=>{const n=o=>{if(!o.length){s(a);return}const r=document.createElement("script");r.type="text/javascript",r.onload=()=>{this.load[o[0]]={source:r,type:"js"},a.push([o[0],r]),n(o.slice(1))},r.onerror=()=>{i({message:o[0]+"\u52A0\u8F7D\u5931\u8D25"})},r.src=o[0],document.getElementsByTagName("head")[0].appendChild(r)};n(t)}):Promise.resolve(a)},loadCss(e){const t=e.filter(s=>!this.load[s]),a=[];return t.length?new Promise((s,i)=>{t.forEach(n=>{const o=document.createElement("link");o.rel="stylesheet",o.onload=()=>{this.load[n]={source:o,type:"css"},a.push([n,o]),a.length===t.length&&s(a)},o.onerror=()=>{i({message:n+"\u52A0\u8F7D\u5931\u8D25"})},o.href=n,document.getElementsByTagName("head")[0].appendChild(o)})}):Promise.resolve(a)},async loadStyle(e){const t=[];return e.forEach(a=>{const s=document.createElement("style");s.innerHTML=a,document.getElementsByTagName("head")[0].appendChild(s);const i=Dt(a);this.load[i]={source:s,type:"css"},t.push([i,s])}),t}},Ee=async(e,t)=>{var i,n;await W.pageLoad(e,t);const a=(((i=ce(e,"script").find(o=>Object.keys(o.attr).length===0))==null?void 0:i.child)||"return {}").replace("export default","return ");let s=new Function(a)();return typeof s!="object"&&(s={}),s.render=Re.compile(((n=Ae(e,"template"))==null?void 0:n.child)||""),s._didCallback=()=>{W.pageLoad(e,t,!0)},s},ea=(e=window.location.href)=>Z.parse(e.split("?")[1]||"");var ta=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getPage:Ze,router:F,moduleName:Y,isModuleIndex:et,resource:W,getComp:Ee,getParams:ea});const Te=()=>Y()+"UserInfo",aa=()=>(x.emit("open-login"),new Promise((e,t)=>{const a=()=>{x.remove("login-success",a),e()};x.add("login-success",a)})),q=()=>{const e=localStorage.getItem(Te());if(e)try{return JSON.parse(e)}catch{return{}}else return{}},tt=e=>{localStorage.setItem(Te(),JSON.stringify(b(b({},q()),e)))},at=()=>{localStorage.removeItem(Te())},sa=()=>{at();const e=Y();Le.forEach(t=>t(!1)),window.location.replace(e?`/${e}`:"/")},Me=()=>!!q().user_id,Le=[];x.add("login-success",()=>{Le.forEach(e=>e(!0))});const st=e=>{Me()&&e(!0),Le.push(e)},O=(e,t="relative")=>{if(e.startsWith("http://")||e.startsWith("https://"))return e;let a=[];return a.push(""),t==="relative"&&e.lastIndexOf("/"+Y(),0)===-1&&a.push("/"+Y()+(e.startsWith("/")?"":"/")),a.push(e),a.join("")},it=()=>window.location.origin,E=window.ajax=async e=>{typeof e=="string"&&(e={url:e});let{url:t,urlType:a,data:s={},method:i="GET",header:n={},onProgress:o,successMsg:r,errorMsg:u=!0,onSource:p}=e;const h=b({Accept:"application/json",Authorization:q().token||""},n),f={method:i,credentials:"omit",headers:h};if(p){const d=He.CancelToken.source();f.cancelToken=d.token,p==null||p(d)}if(o&&(f.onUploadProgress=d=>{const m=d.loaded/d.total*100|0;o(m)}),i.toUpperCase()!=="GET")f.data=s;else{const d=Z.stringify(s);d&&~t.indexOf("?")?t+="&"+d:d&&(t+="?"+d)}return f.url=O(t,a),He(f).then(d=>{var X,ae;const m={code:d.status,message:d.statusText},N=d.headers["content-type"].toLowerCase().indexOf("application/json")===0,I=d.headers.authorization;return I&&tt({token:I}),d.headers["x-location"]&&F(d.headers["x-location"]),d.headers["x-menu-select"]&&x.emit("request-menu-select",d.headers["x-menu-select"]),m.data=d.data,((ae=(X=m.data)==null?void 0:X.data)==null?void 0:ae.__event)&&re.emit(m.data.data.__event.name,m.data.data.__event.data),N?(r&&window.message.success(m.data.message),m.data.data):(r&&window.message.success(m.message),m.data)}).catch(async d=>{var A,N,I;const m=d.response;if((m==null?void 0:m.status)===401||(m==null?void 0:m.status)===402)return at(),await aa(),E(e);throw u&&window.message.error(((N=(A=m==null?void 0:m.data)==null?void 0:A.error)==null?void 0:N.message)||((I=m==null?void 0:m.data)==null?void 0:I.message)||(d==null?void 0:d.message)||"\u4E1A\u52A1\u7E41\u5FD9\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5"),m})},lt={},ia=(e={},t)=>{typeof e=="string"&&(e={url:e});const{url:a,data:s}=e,i=`${a}-${JSON.stringify(s)}`;let n=lt[i];return(!n||!n.data&&!n.request)&&(n=lt[i]={data:null,queue:[],request:null},n.request=E(e).then(o=>{n.data=o,n.queue.forEach(([r])=>{r(t?we(o):o)})}).catch(o=>{n.queue.forEach(([,r])=>{r(o)})}).finally(()=>{n.request=null})),n.data?Promise.resolve(t?we(n.data):n.data):new Promise((o,r)=>{n.queue.push([o,r])})},Ne={},de=(e,t="")=>{typeof e=="string"&&(e={url:e});const a=e.url+t;Ne[a]===void 0&&(Ne[a]={timer:null,prevReject:null,requestTask:null});const s=Ne[a];return new Promise((i,n)=>{var o,r;s.timer&&(clearTimeout(s.timer),s.prevReject({message:"\u8FC7\u5FEB\u8BF7\u6C42",code:1})),s.requestTask&&((r=(o=s.source)==null?void 0:o.cancel)==null||r.call(o,"\u8BF7\u6C42\u88AB\u8986\u76D6"),s.requestTask=null,s.source=null,s.prevReject({message:"\u8BF7\u6C42\u88AB\u8986\u76D6",code:2})),s.prevReject=n,s.timer=setTimeout(()=>{s.timer=null,s.requestTask=E($(b({},e),{onSource(u){s.source=u}})).then(i).catch(n).finally(()=>{s.requestTask=null,s.source=null})},200)})},la=window.selectQuery=function(e,t){if(!e.length){this.nParams.options=[];return}this.loading=!0,E({url:t,method:"get",data:{query:e}}).then(a=>{let s=a.data.map(i=>({label:i.name,value:i.id}));this.nParams.options=s,this.loading=!1}).catch(()=>{this.loading=!1})},na=(e,t)=>{let a;const s=r=>{x.remove("download-manage-add-callback",s),a=r};x.add("download-manage-add-callback",s),x.emit("download-manage-add");const i=new XMLHttpRequest;i.open("GET",O(e,t)),i.responseType="blob";const n={Accept:"application/json",Authorization:q().token||""};Object.keys(n).forEach(r=>{i.setRequestHeader(r,n[r])});let o=e.split("?")[0].split("/");o=o[o.length-1],i.addEventListener("progress",r=>{x.emit("download-manage-update",{key:a,total:r.total,loaded:r.loaded})}),i.addEventListener("readystatechange",()=>{XMLHttpRequest.HEADERS_RECEIVED===i.readyState&&(i.getResponseHeader("content-disposition")&&(o=decodeURIComponent(i.getResponseHeader("content-disposition").split('"')[1])),x.emit("download-manage-update",{key:a,filename:o}))}),i.onload=function(r){if(this.status===200){x.emit("download-manage-update",{key:a,result:!0});const u=this.response,p=new FileReader;p.readAsDataURL(u),p.onload=function(h){const f=document.createElement("a");f.download=o,f.href=h.target.result,document.body.appendChild(f),f.click(),document.body.removeChild(f)}}else x.emit("download-manage-update",{key:a,error:!0})},i.send()};var oa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",getUrl:O,getDomain:it,request:E,requestCache:ia,searchQuick:de,selectQuery:la,download:na}),Be="/static/manage/logo.d66db2fc.svg",ra="/static/manage/login-foot.1c6cc2f5.png",nt="/static/manage/login-side.19d425f0.png";const je=e=>{let t,a;const s=new Promise((n,o)=>{t=n,a=o}),i=setTimeout(()=>t({code:200,message:"\u5012\u8BA1\u65F6\u7ED3\u675F",type:"timeout"}),e);return s.clear=()=>{clearTimeout(i),a({code:500,message:"\u6E05\u9664\u5012\u8BA1\u65F6"})},s},Pe=e=>{let t=localStorage.getItem("weather");t=t?JSON.parse(t):{},t.time+108e5>new Date().getTime()?e(t.data):E({url:"map/weather",errorMsg:!1}).then(a=>{localStorage.setItem("weather",JSON.stringify({time:new Date().getTime(),data:a})),e(a)})},xe=(e,t=document,a={left:0,top:0})=>!e||e===t?a:(a.left+=e.offsetLeft,a.top+=e.offsetTop,xe(e.offsetParent,t,a)),ca=(...e)=>{const t=k({});return e.forEach(a=>{ge(a,s=>{Object.keys(s).forEach(i=>{t.value[i]=s[i]})}),Object.keys(a).forEach(s=>{t.value[s]=a[s]})}),t.value};var ua=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",asyncTimeOut:je,weather:Pe,getOffset:xe,watchAssignObject:ca}),K=(e,t)=>{const a=e.__vccOpts||e;for(const[s,i]of t)a[s]=i;return a};const da={mounted(){this.currentTime(),this.$nextTick(()=>{setTimeout(()=>{this.readonly=!1},500)})},setup(){const e=k({logo:Be,post:{},show:!Me(),register:!1,status:!1,loading:!0,vueComp:""});!Me()&&message.loading("\u8BF7\u7A0D\u540E"),E({url:"login/check",method:"GET"}).then(i=>{e.value.register=!!i.register,i.page?Ee(i.page,"loginPage").then(n=>{e.value.vueComp=qe({loader:()=>Promise.resolve(n),suspensible:!1}),setTimeout(()=>{n._didCallback()},100),e.value.loading=!1,message.clear()}):(e.value.loading=!1,message.clear())}),x.add("open-login",()=>{e.value.show||(e.value.show=!0,window.message.error("\u767B\u5F55\u5DF2\u5931\u6548\uFF0C\u8BF7\u8FDB\u884C\u767B\u5F55"))});const t=k(""),a=k(""),s=k({});return Pe(i=>{s.value=i}),window.appConfig.login.side&&window.appConfig.login.side.length>0&&window.appConfig.login.side,{data:e,nowDate:t,nowTime:a,config:{logo:window.appConfig.login.logo||Be,background:window.appConfig.login.background,title:window.appConfig.login.title||"DuxRavel",name:window.appConfig.login.name||"\u7CFB\u7EDF\u767B\u5F55",desc:window.appConfig.login.desc||"",contact:window.appConfig.login.contact||"",side:window.appConfig.login.side&&window.appConfig.login.side.length>0?window.appConfig.login.side:[nt],foot:window.appConfig.login.foot||ra},readonly:k(!0),weatherData:s,formatDate(){let i=new Date,n=i.getFullYear(),o=i.getMonth()+1;o=o<10?"0"+o:o;let r=i.getDate();r=r<10?"0"+r:r;let u=i.getDay(),p=["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],h=i.getHours();h=h<10?"0"+h:h;let f=i.getMinutes();f=f<10?"0"+f:f,i.getSeconds(),t.value=`${n} \u5E74 ${o} \u6708 ${r} \u65E5 ${p[u]}`,a.value=`${h}:${f}`},currentTime(){setInterval(this.formatDate,500)},input(i,n){e.value.post[i]=n},handleCheckedChange(i){e.value.post.remember=i?1:0},login(i){if(i.preventDefault(),!e.value.status)return e.value.status=!0,E({url:e.value.register?"register":"login",data:e.value.post,method:"POST"}).then(n=>{tt($(b({},n.userInfo),{token:n.token})),x.emit("login-success"),e.value.show=!1}).finally(()=>{e.value.status=!1}),!1}}}},ha={class:"max-w-7xl mx-auto px-4 h-screen flex flex-col"},pa={class:"flex-none flex py-4 text-gray-100 dark:text-gray-200 items-center"},fa={class:"flex-grow flex gap-4 items-center justify-start my-0"},ga={class:""},ma=["src"],ya={class:"flex flex-col gap-1"},va={class:"text-2xl"},wa={key:0,class:"opacity-50"},ba={key:0,class:"flex-none flex items-center gap-4 text-right"},xa={class:"flex flex-col gap-1 flex-grow"},ka={key:0},Ca={class:"flex-none text-4xl"},Fa={class:"flex-grow flex items-center justify-center"},Da={class:"max-w-4xl w-full flex flex-row bg-white dark:bg-blackgray-5 shadow rounded"},_a={class:"w-1/2 bg-white rounded-l"},Sa=["src"],Aa={class:"flex-grow flex flex-col max-w-xs w-full"},Ea={class:"text-center mt-20 mb-10"},Ta={class:"text-blue-600 text-2xl"},Ma=g("input",{type:"hidden",name:"remember",value:"true"},null,-1),La={key:0,class:"text-center text-gray-600 mt-2"},Na={class:"flex-none text-center dark:text-white dark:opacity-30 text-gray-400"};function Ba(e,t,a,s,i,n){const o=c("a-carousel-item"),r=c("a-carousel"),u=c("icon-user"),p=c("a-input"),h=c("icon-lock"),f=c("a-input-password"),d=c("a-button");return s.data.show?(v(),D("div",{key:0,class:"absolute inset-0 bg-cover bg-center overflow-y-auto bg-blackgray-3 bg-gradient-to-r from-pinkpurple-300 to-arcoblue-300",style:le([{"z-index":"100"},s.config.background?{backgroundImage:"url("+s.config.background+")"}:""])},[g("div",ha,[g("div",pa,[g("div",fa,[g("div",ga,[g("img",{src:s.config.logo,class:"h-12"},null,8,ma)]),g("div",ya,[g("div",va,P(s.config.title),1),s.config.desc?(v(),D("div",wa,P(s.config.desc),1)):z("",!0)])]),s.nowDate?(v(),D("div",ba,[g("div",xa,[g("div",null,P(s.nowDate),1),s.weatherData.city?(v(),D("div",ka,P(s.weatherData.city)+" "+P(s.weatherData.weather)+" "+P(s.weatherData.temperature)+"\xB0 ",1)):z("",!0)]),g("div",Ca,P(s.nowTime),1)])):z("",!0)]),g("div",Fa,[g("div",Da,[g("div",_a,[l(r,{class:"w-full h-full","auto-play":!0,"indicator-type":"dot","show-arrow":"hover"},{default:V(()=>[(v(!0),D(R,null,ee(s.config.side,m=>(v(),H(o,null,{default:V(()=>[g("img",{src:m,style:{width:"100%",height:"100%"}},null,8,Sa)]),_:2},1024))),256))]),_:1})]),g("div",{class:"w-1/2 flex flex-col justify-center items-center p-4 pt-0",style:le([{height:"600px","background-repeat":"repeat-x","background-position":"center bottom"},{backgroundImage:"url("+s.config.foot+")"}])},[g("div",Aa,[g("div",Ea,[g("div",Ta,P(s.config.name),1)]),g("form",{class:"flex flex-col gap-6",onSubmit:t[2]||(t[2]=(...m)=>s.login&&s.login(...m))},[s.data.vueComp?(v(),H(_e(s.data.vueComp),{key:0,data:s.data},null,8,["data"])):(v(),D(R,{key:1},[Ma,g("div",null,[l(p,{placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u53F7",size:"large",readonly:s.readonly,"onUpdate:modelValue":t[0]||(t[0]=m=>s.input("username",m))},{prefix:V(()=>[l(u)]),_:1},8,["readonly"])]),g("div",null,[l(f,{placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801",size:"large",readonly:s.readonly,"onUpdate:modelValue":t[1]||(t[1]=m=>s.input("password",m))},{prefix:V(()=>[l(h)]),_:1},8,["readonly"])]),g("div",null,[l(d,{"html-type":"submit",type:"primary",size:"large",loading:s.data.status||s.data.loading,long:""},{default:V(()=>[C(P(s.data.register?"\u6CE8\u518C\u767B\u5F55":"\u767B\u5F55"),1)]),_:1},8,["loading"]),s.data.register?(v(),D("div",La," \u9996\u6B21\u767B\u5F55\u5C06\u4F7F\u7528\u8D26\u53F7\u5BC6\u7801\u8FDB\u884C\u6CE8\u518C ")):z("",!0)])],64))],32)]),g("div",Na,P(s.config.contact),1)],4)])])])],4)):z("",!0)}var ja=K(da,[["render",Ba]]);const Pa=window.createGetKeys=e=>e.replace(/\"/g,"'").split("'].").map(t=>t.split("['").map((a,s)=>s?a:a.split(".")).flat()).flat().map(t=>t.replace("']",""));window.createKeyToRef=(e,t)=>{let a=e.shift();for(;a;)!_t(t[a])&&!St(t[a])&&!At(t[a])?t=Et(t,a):t=t[a],a=e.shift();return t};const Oa=/^v[A-Z]/,Ia=e=>Oa.test(e)||e.startsWith("render"),Ua=e=>`(()=>{
const res = ${e||"null"};
if(Vue.isRef(res)||Vue.isReactive(res)||Vue.isProxy(res))return res;
const _v=Vue.ref(${e});
${e?`Vue.watch(${e},val=>_v.value=val);`:""}
return _v;
})()`,$a="createPropsProvideKey",J=function(e,t={}){try{const a=b(b({},this),t),s=Object.keys(a);return new Function(...s,"return "+e).apply(null,s.map(i=>a[i]))}catch(a){console.error(a)}},Q=function(e,t,a){const{nodeName:s,child:i,vStringReplace:n}=e,o=Object.keys(e),r=o.find(h=>h.startsWith("vSlot")),u=(()=>{if(!r||!e[r]||typeof e[r]!="string"||!a)return{};const h=e[r].replace(/[ {}]{1,}/g,"").split(",").map(d=>d.split("=")[0].split(":")).map(d=>d[1]||d[0]).toString(),f=`
    const ${e[r]} = props;
    return { ${h} }
    `;return new Function("props",f)(a)})();let p=b(b({},t),u);if(e.vData){const h=typeof e.vData;if(!["string","object"].includes(h)||!e.vData)console.error("vData:\u65E0\u6548\u7684\u7C7B\u578B",e.vData);else{const f=Tt(h==="string"?J.call(this,e.vData,p):e.vData);p=b(b({},p),f)}delete e.vData}return o.forEach(h=>{if(!!Ia(h))if(h.startsWith("vOn")){const f=`on${h.substr(4,1).toUpperCase()}${h.substr(5)}`,d=e[h];delete e[h],e[f]=(m,...A)=>{const N=J.call(this,d,$(b({},p),{$event:m}));typeof N=="function"&&N.call(this,m,...A)}}else if(h.startsWith("vBindOnly"))e[h.substr(10)]=J.call(this,Ua(e[h]),p),delete e[h];else if(h.startsWith("vBind"))e[h.substr(6)]=J.call(this,e[h],p);else if(h.startsWith("vModel")){const f=e[h];delete e[h];const d=h.substr(7)||"modelValue",m=Pa(f);e[d]=J.call(this,`createKeyToRef(${JSON.stringify(m.slice(1))}, ${m[0]})`,p),e[`onUpdate:${d}`]=A=>J.call(this,`${f} = _value`,$(b({},p),{_value:A}))}else if(h.startsWith("render")||h.startsWith("vRender")){h.startsWith("vRender")&&(e[h.substr(8)]=e[h],delete e[h],h=h.substr(8));const f=e[h];delete e[h];const d=h.split(":"),m=d[1]?d[1].replace(/ /g,"").split(","):[];e[d[0]]=(...A)=>he.call(this,f,b(b({},p),Object.fromEntries(m.map((N,I)=>[N,A[I]])))).default()}else h.startsWith("vChild")&&typeof e[h]=="object"&&(e[h.split(":")[1]]=Q(e[h],p),delete e[h])}),n&&typeof n=="string"&&Object.keys(e).forEach(h=>{if(typeof e[h]=="string"){const f=e[h].replace(n,""),d=`onUpdate:${h}`;f!==e[h]&&typeof e[d]=="function"&&e[d](f),e[h]=f}}),s&&typeof s=="string"?Mt(_e(s),e,he.call(this,i,p)):e},za=function(e,t,a){if(typeof e=="string"||typeof e=="number"){e+="";const s=[],i=e.split("{{");i[0]&&s.push(i[0]);for(let n=1;n<i.length;n++){const o=i[n].split("}}");s.push(J.call(this,o[0],t)),o[1]&&s.push(o[1])}return s.join("")}else if(typeof e=="object"&&e!==null){const{vIf:s,vFor:i}=e;if(s&&!J.call(this,s,t))return;if(i){const n=i.split(" in ");n[0]=n[0].replace(/[ ()]/g,"").split(",");const o=J.call(this,n[1],t);if(typeof o!="object")return;const r=[];for(const u in o)if(Object.hasOwnProperty.call(o,u)){const p=$(b({},t),{[n[0][0]]:o[u]});n[0][1]&&(p[n[0][1]]=u),r.push(Q.call(this,e,p,a))}return r}else return Q.call(this,e,t,a)}},he=function(e,t){if(typeof e=="undefined"||typeof e=="object"&&(!e||Object.keys(e).length===0))return{};const a={},s={};return(e instanceof Array?e:[e]).forEach(n=>{if(typeof n=="string"||typeof n=="number")s.default=s.default||[],s.default.push(n);else if(typeof n=="object"&&Object.keys(n).length&&n!==null){const o=Object.keys(n).find(u=>u.startsWith("vSlot")),r=o&&o.substr(6)||"default";s[r]=s[r]||[],s[r].push(n)}}),Object.keys(s).forEach(n=>{!s[n].length||(a[n]=o=>s[n].map(r=>za.call(this,r,t,o)))}),a},ot=L({props:{node:{type:[Array,Object,String],default:""},setupScript:{type:String,default:""},data:{type:Object,delault:()=>({})}},setup(e,t){Lt($a,e);let a=new Function("props","context",e.setupScript)(Nt(e),t);return typeof a!="object"&&(a={}),typeof e.data!="undefined"&&typeof a.data=="undefined"&&(a.data=e.data),a.keys=Object.keys(a),a},render(){var e,t;return(t=(e=he.call(Object.fromEntries(this.keys.map(a=>[a,this[a]])),this.node)).default)==null?void 0:t.call(e)}}),Va={props:{title:String,code:String},methods:{back(){F.back()},reload(){F.replace(window.location.pathname+window.location.search)}}},Ra={class:"h-screen flex flex-col items-center justify-center"},Ha=g("div",{class:"text-gray-400"},[g("svg",{class:"w-48",viewBox:"0 0 1192 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"21461"},[g("path",{d:"M1015.882086 251.006488v520.549247a7.564922 7.564922 0 0 1-7.542803 7.542803H299.205219a7.564922 7.564922 0 0 1-7.542803-7.542803v-520.549247a30.149092 30.149092 0 0 1 30.141718-30.178585h663.936234a30.149092 30.149092 0 0 1 30.141718 30.178585z m105.967901 565.850303v22.635782a30.149092 30.149092 0 0 1-30.141719 30.178584H215.836234a30.149092 30.149092 0 0 1-30.178585-30.178584v-22.635782a7.564922 7.564922 0 0 1 7.542803-7.542803h392.668141a7.564922 7.564922 0 0 1 7.542802 7.542803 7.564922 7.564922 0 0 0 7.542803 7.542803h105.628733a7.564922 7.564922 0 0 0 7.542803-7.542803 7.564922 7.564922 0 0 1 7.542802-7.542803h392.668141a7.564922 7.564922 0 0 1 7.550176 7.542803z",fill:"#E2E5F1",opacity:".8","p-id":"21462"}),g("path",{d:"M650.2073 552.917678a31.173969 31.173969 0 1 1 22.023804-9.128045 30.886414 30.886414 0 0 1-22.023804 9.128045z m114.793643-65.570035l-18.21185 15.572238a99.103434 99.103434 0 0 1 0 32.132488l18.204477 15.564864a8.914222 8.914222 0 0 1 2.588 9.799008l-0.25069 0.737322a123.221233 123.221233 0 0 1-22.156522 38.340738l-0.508752 0.597231a8.951088 8.951088 0 0 1-9.769515 2.646985l-22.598916-8.044182a97.21589 97.21589 0 0 1-27.730676 16.007258l-4.372318 23.63854a8.921595 8.921595 0 0 1-7.181515 7.152022l-0.737322 0.140091a125.462691 125.462691 0 0 1-44.239313 0l-0.737322-0.140091a8.921595 8.921595 0 0 1-7.174142-7.152022l-4.423931-23.749138a98.417725 98.417725 0 0 1-27.524226-16.014631l-22.761126 8.110541a8.906848 8.906848 0 0 1-9.769515-2.646986l-0.501379-0.582484a124.150258 124.150258 0 0 1-22.156523-38.340738l-0.250689-0.737322a8.951088 8.951088 0 0 1 2.588-9.806381l18.433047-15.727076a97.87948 97.87948 0 0 1-1.28294-15.867166 96.876722 96.876722 0 0 1 1.28294-15.867167l-18.374062-15.727076a8.914222 8.914222 0 0 1-2.587999-9.806381l0.250689-0.737322a123.523535 123.523535 0 0 1 22.156523-38.340738l0.501378-0.582484a8.951088 8.951088 0 0 1 9.769515-2.646985l22.775873 8.11054a96.412209 96.412209 0 0 1 27.538972-15.955645l4.423932-23.741765a8.921595 8.921595 0 0 1 7.174142-7.159395l0.737321-0.140091a124.902326 124.902326 0 0 1 44.239313 0l0.737322 0.140091a8.936341 8.936341 0 0 1 7.181515 7.159395l4.372319 23.631166a97.864733 97.864733 0 0 1 27.730676 16.014632l22.598916-8.044182a8.899475 8.899475 0 0 1 9.769514 2.646986l0.508753 0.582484a124.150258 124.150258 0 0 1 22.156522 38.340738l0.250689 0.737321a8.987954 8.987954 0 0 1-2.646985 9.740023z m-114.793643-14.539988a48.943426 48.943426 0 1 0 48.943426 48.9508 48.943426 48.943426 0 0 0-48.943426-48.9508z",fill:"#FFFFFF",opacity:".8","p-id":"21463"}),g("path",{d:"M1152.729027 718.018793a40.088191 40.088191 0 1 1 40.088191-40.088191 40.368373 40.368373 0 0 1-40.088191 40.088191z m0-66.403208a26.307645 26.307645 0 1 0 26.307645 26.307644 26.469855 26.469855 0 0 0-26.307645-26.307644z",fill:"#2563eb",opacity:".8","p-id":"21464"}),g("path",{d:"M280.558349 391.517918l-60.947027-60.947026 60.947027-60.947027 60.947026 60.947027z m-39.645798-60.947026l40.235655 40.235655 40.235655-40.235655-40.235655-40.235655z",fill:"#C2C8D8",opacity:".8","p-id":"21465"}),g("path",{d:"M742.896033 63.409682a7.373219 7.373219 0 0 1-7.373219-7.373219V39.623678h-16.405411a7.373219 7.373219 0 0 1-7.373219-7.373219v-1.105983a7.373219 7.373219 0 0 1 7.373219-7.373219h16.405411V7.373219a7.373219 7.373219 0 0 1 7.373219-7.373219h1.105983a7.373219 7.373219 0 0 1 7.373219 7.373219v16.398038h16.405412a7.373219 7.373219 0 0 1 7.373219 7.373219v1.105983a7.373219 7.373219 0 0 1-7.373219 7.373219h-16.405412V56.036463a7.373219 7.373219 0 0 1-7.373219 7.373219z",fill:"#2563eb",opacity:".8","p-id":"21466"}),g("path",{d:"M603.748648 1023.97788a7.373219 7.373219 0 0 1-7.373219-7.373218v-26.683679h-26.683679a7.373219 7.373219 0 0 1-7.373218-7.373219v-7.977823a7.373219 7.373219 0 0 1 7.373218-7.373219h26.683679v-26.676305a7.373219 7.373219 0 0 1 7.373219-7.373219h7.97045a7.373219 7.373219 0 0 1 7.373218 7.373219v26.676305h26.683679a7.373219 7.373219 0 0 1 7.373219 7.373219v7.977823a7.373219 7.373219 0 0 1-7.373219 7.373219h-26.683679v26.705798a7.373219 7.373219 0 0 1-7.373218 7.373219z",fill:"#C2C8D8",opacity:".8","p-id":"21467"}),g("path",{d:"M177.340659 189.204168a7.373219 7.373219 0 0 1-7.373219-7.373219V159.40899h-22.414585a7.373219 7.373219 0 0 1-7.373219-7.373218v-5.109641a7.373219 7.373219 0 0 1 7.373219-7.373219h22.414585v-22.407212a7.373219 7.373219 0 0 1 7.373219-7.373219h5.10964a7.373219 7.373219 0 0 1 7.373219 7.373219v22.407212h22.414585a7.373219 7.373219 0 0 1 7.373219 7.373219v5.109641a7.373219 7.373219 0 0 1-7.373219 7.373218h-22.414585v22.421959a7.373219 7.373219 0 0 1-7.373219 7.373219z",fill:"#F1F3F8",opacity:".8","p-id":"21468"}),g("path",{d:"M1107.309999 223.526501v-10.646928h-10.632181a5.323464 5.323464 0 0 1 0-10.646928h10.632181v-10.632181a5.323464 5.323464 0 0 1 10.646928 0v10.632181h10.646928a5.323464 5.323464 0 0 1 0 10.646928h-10.646928v10.646928a5.323464 5.323464 0 0 1-10.646928 0z",fill:"#F1F3F8",opacity:".8","p-id":"21469"}),g("path",{d:"M439.207897 776.141877l24.589685-14.193446 19.657001 34.049524-306.497332 176.957251-19.657001-34.049524 24.589685-14.20082-24.176785-76.858432 227.036153-131.073711 54.465968 59.369158zM303.039293 627.718982l54.47334 59.369158-211.921055 122.351193-24.184157-76.85106 181.617125-104.861917z m-27.221924-29.684578L109.307969 694.16643l-19.450551-61.809693a19.664375 19.664375 0 0 1 8.936341-22.93071l108.909815-62.886184a19.664375 19.664375 0 0 1 24.302129 3.752969l43.804293 47.748965z",fill:"#2563eb",opacity:".8","p-id":"21470"}),g("path",{d:"M805.487288 369.803789l193.576486-111.763251a14.009116 14.009116 0 0 1 19.089263 5.117014l34.926938 60.49726a14.009116 14.009116 0 0 1-5.117014 19.081891l-193.576486 111.76325a14.009116 14.009116 0 0 1-19.12613-5.102267l-34.926937-60.489887a14.009116 14.009116 0 0 1 5.15388-19.096637z m87.062967 94.922819l72.589339-41.909376a14.009116 14.009116 0 0 1 19.081891 5.117014l20.954687 36.290983 12.099452-6.982438 41.909376 72.589339-48.390435 27.944499-41.909376-72.596712 12.092079-6.982439-13.964876-24.198904-72.618832 41.931496a14.009116 14.009116 0 0 1-19.089264-5.117014l-13.964876-24.191531 24.191531-13.97225 6.989811 12.099452z m154.033914-60.991266l9.04694-33.739849 33.739849 9.039566a34.926937 34.926937 0 1 1-42.786789 24.700283z",fill:"#697391",opacity:".8","p-id":"21471"})])],-1),qa={class:"text-lg mt-5 mb-2"},Ka=g("div",{class:"text-gray-400"},"\u60A8\u53EF\u4EE5\u5C1D\u8BD5\u5237\u65B0\u8BE5\u9875\u9762\uFF0C\u6216\u8FD4\u56DE\u524D\u4E00\u4E2A\u64CD\u4F5C\u9875\u9762",-1),Ga={class:"flex gap-4 mt-5"},Ja=C("\u8FD4\u56DE\u9875\u9762"),Ya=C("\u5C1D\u8BD5\u5237\u65B0");function Wa(e,t,a,s,i,n){const o=c("a-button");return v(),D("div",Ra,[Ha,g("div",qa,P(a.code)+" "+P(a.title),1),Ka,g("div",Ga,[l(o,{type:"primary",onClick:n.back},{default:V(()=>[Ja]),_:1},8,["onClick"]),l(o,{type:"outline",onClick:n.reload},{default:V(()=>[Ya]),_:1},8,["onClick"])])])}var Qa=K(Va,[["render",Wa]]);let pe;const Xa={name:"PageRoute",props:{currentUrl:{type:String,default:""},windowType:{type:String,default:"page"}},components:{Create:ot,ErrorPage:Qa},data(){return{pageType:"",createData:{node:[]},vueComp:"",htmlComp:"",uninstall:!1,errorMessage:"",appStyle:null}},created(){this.getPage(this.currentUrl),x.add("router-change",this.routeChange)},beforeUnmount(){x.remove("router-change",this.routeChange)},watch:{currentUrl(e){this.getPage(e)}},methods:{loadStyle(e){const t=document.createElement("style");t.innerHTML=e,document.getElementsByTagName("html")[0].appendChild(t),pe=t},unloadStyle(){var e,t;(t=(e=pe==null?void 0:pe.parentNode)==null?void 0:e.removeChild)==null||t.call(e,pe)},routeChange(e){e.url===this.currentUrl&&["push","replace"].includes(e.agree)&&this.getPage(e.url)},getPage(e){e!=="/"&&(this.pageStatus&&this.pageStatus.abort(),this.pageStatus=Ze(e,this.windowType),this.$emit("load-status",{type:"start"}),this.pageStatus.then(({type:t,data:a})=>{if(this.errorMessage="",this.pageType=t,this.pageStatus=null,this.shadowRoot,t==="vue")return Ee(a,this.currentUrl).then(s=>{this.vueComp=qe({loader:()=>Promise.resolve(s),suspensible:!1}),setTimeout(()=>{s._didCallback()},100)});t==="html"?this.htmlComp=a:(this.uninstall=!0,this.createData=a,a.static&&(W.pageLoad(a.static,this.currentUrl),delete a.static))}).then(()=>{this.$nextTick(()=>{this.uninstall=!1}),W.uninstall(this.oldUrl),this.oldUrl=e,this.$nextTick(()=>{setTimeout(()=>{const a=new Event("resize");window.dispatchEvent(a)},20),this.$emit("load-status",{type:"end"})});const t=()=>{const a={start:{x:0,y:0},move:{x:0,y:0}},s=document.querySelector(".arco-modal-wrapper .arco-modal"),i=document.querySelector(".arco-modal-wrapper .arco-modal-header");if(!i)return;const n=new Se.Manager(i);n.add(new Se.Pan({direction:Se.DIRECTION_ALL,threshold:0}));const o={x:0,y:0},r=u=>{switch(u.type){case"panstart":if(s.style.transform){const[h,f]=s.style.transform.match(/\d{1,}px|-\d{1,}px/g).map(d=>d.split("px")[0]|0);o.x=h,o.y=f}a.start=u.center,a.move=u.center;break;case"pan":a.move=u.center;break;case"panend":a.move=u.center;break}const{top:p}=xe(s);s.style.transform=`translate3d(${o.x+a.move.x-a.start.x}px, ${Math.max(o.y+a.move.y-a.start.y,-p)}px, 0)`};return n.on("pan panstart panend",r),()=>{n.off("pan panstart panend",r)}};setTimeout(()=>{t()},500)}).catch(t=>{var a,s;W.uninstall(this.oldUrl),this.oldUrl=e,t.status!==1&&(this.errorCode=t.status,this.errorMessage=((s=(a=t.data)==null?void 0:a.error)==null?void 0:s.message)||t.message||"\u9875\u9762\u52A0\u8F7D\u5931\u8D25",this.$emit("load-status",{type:"error"}),this.pageStatus=null)}))}}};function Za(e,t,a,s,i,n){const o=c("Create"),r=c("ErrorPage");return v(),D(R,null,[!i.uninstall&&!i.errorMessage&&a.currentUrl?(v(),D(R,{key:0},[i.pageType==="vue"?(v(),H(_e(i.vueComp),{key:0})):z("",!0),i.pageType==="node"?(v(),H(o,Bt(oe({key:1},i.createData)),null,16)):z("",!0)],64)):z("",!0),i.errorMessage?(v(),H(r,{key:1,title:i.errorMessage,code:e.errorCode},null,8,["title","code"])):z("",!0)],64)}var es=K(Xa,[["render",Za]]);const ts={name:"PageContent",props:{currentUrl:{type:String,default:""},windowType:String,mode:{type:String,default:"modal"}},components:{PageRoute:es},data(){return{url:"",urls:[],dialogMsg:null,dialogShow:!1}},watch:{currentUrl(e){this.windowType==="page"&&(this.url=e)}},created(){this.url=this.currentUrl,this.urls.push(this.currentUrl)},mounted(){},methods:{closeWindow(){this.dialogShow?(this.dialogShow=!1,setTimeout(()=>{this.$emit("close-dialog")},200)):this.$emit("close-dialog")},changeRouter(e,t){if(this.windowType==="page")F[t](e);else if(t==="push")this.urls.push(e),this.url=e;else if(t==="replace")this.url=e;else if(t==="back"){const a=e|0||1;a>=this.urls.length?this.closeWindow():(this.urls.splice(this.urls.length-a),this.url=this.urls[this.urls.length-1])}},closeLoading(){var e,t;(t=(e=this.dialogMsg)==null?void 0:e.close)==null||t.call(e),this.dialogMsg=null},loadStatus({type:e}){this.windowType==="page"?e==="start"?window.NProgress.start():(this.pageAnimation(),window.NProgress.done()):e==="start"?this.dialogMsg=window.message.info("\u52A0\u8F7D\u9875\u9762\u4E2D\uFF0C\u8BF7\u7A0D\u7B49..."):e==="end"?setTimeout(()=>{this.dialogShow=!0,this.closeLoading()},500):(setTimeout(()=>{this.dialogShow=!0,this.closeLoading()},500),this.urls.length===1&&this.closeWindow())},pageAnimation(){const e=document.getElementById("page-animation");e.classList.add("an-start"),setTimeout(()=>{e.classList.remove("an-start")},5)},dialogAnimation(){const e=this.$refs.dialogAnimation.$el;e.classList.add("an-start"),setTimeout(()=>{e.classList.remove("an-start")},5)},dialogOpen(){}}},as={ref:"dialogAnimation",class:"dialog-animation"},ss={ref:"dialogAnimation",class:"dialog-animation"};function is(e,t,a,s,i,n){const o=c("PageRoute"),r=c("a-modal"),u=c("a-drawer");return a.windowType==="page"?(v(),H(o,{key:0,windowType:a.windowType,currentUrl:i.url,onLoadStatus:n.loadStatus},null,8,["windowType","currentUrl","onLoadStatus"])):a.mode==="modal"?(v(),H(r,{key:1,visible:i.dialogShow,modalClass:"page-dialog max-w-2xl w-full",closable:!1,mask:!0,footer:!1,alignCenter:!1,open:n.dialogOpen},{default:V(()=>[g("div",as,[l(o,{windowType:a.windowType,currentUrl:i.url,onLoadStatus:n.loadStatus},null,8,["windowType","currentUrl","onLoadStatus"])],512)]),_:1},8,["visible","open"])):(v(),H(u,{key:2,visible:i.dialogShow,"onUpdate:visible":t[0]||(t[0]=p=>i.dialogShow=p),class:"page-drawer",mask:!0,footer:!1,width:350,open:n.dialogOpen,onCancel:t[1]||(t[1]=()=>{this.changeRouter("","back")})},{default:V(()=>[g("div",ss,[l(o,{windowType:a.windowType,currentUrl:i.url,onLoadStatus:n.loadStatus},null,8,["windowType","currentUrl","onLoadStatus"])],512)]),_:1},8,["visible","open"]))}var ls=K(ts,[["render",is]]);const ns={name:"AppMenu",props:{menu:{type:Object,default:()=>({})},select:{type:Array,default:()=>[]}},data(){return{menuData:{}}},watch:{menu(e,t){if(e.name===(t==null?void 0:t.name))return;const a=document.querySelector(".menu-child-root");if(a){const s=t.menu?"menu":"empty",i=e.menu?"menu":"empty";s==="empty"&&i==="menu"?(this.menuData=e,setTimeout(()=>{a.classList.remove("hide")},50)):s!=="empty"&&i!=="menu"?(a.classList.add("hide"),setTimeout(()=>{this.menuData=e},200)):(this.menuData=e,a.classList.add("an-start"),setTimeout(()=>{a.classList.remove("an-start")},5))}}},methods:{target(e){e.app!=="app"&&F.push(e.url)},routeUrl(){return this.menu.route+window.location.search}}},os={class:"p-4 py-3 dark:text-gray-400"},rs={class:"text-xs text-gray-400 dark:text-gray-500 py-3 px-2 block"},cs=["onClick"];function us(e,t,a,s,i,n){const o=c("c-scrollbar");return v(),D("div",{class:te(["menu-child-root hide lg:block border-r border-white dark:bg-blackgray-4 dark:border-blackgray-5",i.menuData.menu?"w-40 bg-white shadow z-20 ":""])},[l(o,{trigger:"hover",direction:"y"},{default:V(()=>[i.menuData.menu?(v(),D(R,{key:0},[g("div",os,P(i.menuData.name),1),(v(!0),D(R,null,ee(i.menuData.menu,(r,u)=>(v(),D("div",{class:"px-2",key:r.name},[g("span",rs,P(r.name),1),r.menu?(v(!0),D(R,{key:0},ee(r.menu,(p,h)=>(v(),D("div",{class:te(["text-gray-800 dark:text-gray-400 hover:text-blue-600 dark:hover:text-gray-300 block p-2.5 rounded truncate cursor-pointer",{"bg-blue-50 text-blue-600 dark:bg-blackgray-1 dark:text-gray-400":a.select[1]===u&&a.select[2]===h}]),key:p.name,onClick:f=>n.target(p)},P(p.name),11,cs))),128)):z("",!0)]))),128))],64)):z("",!0)]),_:1})],2)}var ds=K(ns,[["render",us]]);const hs=L({setup(){const e=k([]);let t=0;return x.add("download-manage-add",()=>{const a={key:t++};x.emit("download-manage-add-callback",a.key),e.value.push(a)}),x.add("download-manage-update",a=>{let s=e.value.findIndex(i=>i.key===a.key);a.result||a.error?(e.value[s]=$(b({},e.value[s]),{type:a.result?"result":"error"}),setTimeout(()=>{s=e.value.findIndex(i=>i.key===a.key),e.value.splice(s,1)},2e3)):e.value[s]=b(b({},e.value[s]),a)}),{list:e}}}),ps=hs,fs={key:0,class:"absolute z-10 download"};function gs(e,t,a,s,i,n){const o=c("icon-check-circle-fill"),r=c("icon-close-circle-fill"),u=c("a-progress"),p=c("a-spin");return e.list.length?(v(),D("div",fs,[(v(!0),D(R,null,ee(e.list,h=>(v(),D("div",{key:h.key,class:te(["download-item shadow-sm",{loading:!h.total}])},[g("div",null,P(h.filename),1),h.type==="result"?(v(),H(o,{key:0})):h.type==="error"?(v(),H(r,{key:1})):(v(),D(R,{key:2},[h.total?(v(),H(u,{key:0,percent:h.loaded/h.total},null,8,["percent"])):(v(),H(p,{key:1,size:18}))],64))],2))),128))])):z("",!0)}var ms=K(ps,[["render",gs],["__scopeId","data-v-c58a8470"]]);const ke=e=>{const t=e instanceof Array?e:e.split(",");let a="*.*";const s={image:"jpg,png,bmp,jpeg,gif",audio:"wav,mp3,acc,ogg",video:"mp4,ogv,webm,ogm",document:"doc,docx,xls,xlsx,pptx,ppt,csv,pdf"};let i=[];for(const n of t){if(n==="other"||n==="all"){i=[];break}s[n].split(",").map(o=>{i.push("."+o)})}return i.length>0&&(a=i.join(",")),a};var ys=L({props:{type:{type:String,default:"all,image,video,audio,document,other"},multiple:{type:Boolean,default:!1},callback:Function,close:Function,uploadUrl:{type:String,default:"upload"},fileUrl:{type:String,default:"fileManage"}},setup(e){const t=k({upload:e.uploadUrl,list:e.fileUrl+"?type=files",del:e.fileUrl+"?type=files-delete",cateList:e.fileUrl+"?type=folder",cateAdd:e.fileUrl+"?type=folder-create",cateDel:e.fileUrl+"?type=folder-delete"}),a=k(!0),s=k(!0),i=k("*.*"),n=k([]),o=k([]),r=k([]),u=k({filter:"all",keyword:"",id:"",page:1}),p=k(1),h=k(16),f=k([]),d=k(!1),m=k({status:!1,select:[]}),A=k("");let N=!1;const I=()=>{N||E(t.value.cateList).then(_=>{var j;n.value=_,u.value.id=((j=_[0])==null?void 0:j.dir_id)||"",N=!0})},X=()=>{a.value=!0,de({url:t.value.list,data:u.value}).then(_=>{o.value=_.data,p.value=_.total,h.value=_.pageSize,a.value=!1})};ge(u.value,()=>{if(!u.value.id){o.value=[],p.value=1,h.value=16;return}X()});const ae=_=>r.value.some(j=>j.file_id===_.file_id),y=_=>r.value.findIndex(j=>j.file_id===_.file_id),w=_=>{var j;if(d.value){const ne=y(_);~ne?r.value.splice(ne,1):r.value.push(_)}else(j=e.callback)==null||j.call(e,_),s.value=!1},T=()=>{var _;(_=e.callback)==null||_.call(e,r.value),s.value=!1},U=()=>{s.value=!1,e.close()},B=k({status:!1,progress:0}),se=(_,j)=>{j.status==="uploading"?(B.value.status=!0,B.value.progress=j.percent*100):j.status==="done"?(B.value.status=!1,X()):j.status==="error"&&window.message.error(j.response.message)},ie=k(!1),yt=()=>{ie.value||!A.value||(ie.value=!0,E({url:t.value.cateAdd,data:{name:A.value}}).then(_=>{n.value.push({dir_id:_.id,name:_.name}),u.value.id=_.id,A.value=""}).finally(()=>{ie.value=!1}))},vt=_=>{const j=n.value[_];window.dialog.error({title:"\u5220\u9664\u63D0\u793A",content:`\u6B64\u64CD\u4F5C\u4E0D\u53EF\u64A4\u9500\uFF0C\u786E\u5B9A\u8981\u5220\u9664"${j.name}"\u5206\u7C7B\u5417\uFF1F`,hideCancel:!1,onOk:()=>{E({url:t.value.cateDel,data:{id:j.dir_id}}).then(()=>{var ne;n.value.splice(_,1),j.dir_id===u.value.id&&(u.value.id=((ne=n.value[0])==null?void 0:ne.dir_id)||"")})}})},ze=e.type.split(","),wt={all:"\u5168\u90E8",image:"\u56FE\u7247",video:"\u89C6\u9891",audio:"\u97F3\u9891",document:"\u6587\u6863",other:"\u5176\u4ED6"};return f.value=ze.map(_=>({label:wt[_],value:_})),d.value=e.multiple,I(),i.value=ke(ze),u.value.filter=f.value[0].value,s.value=!0,r.value.splice(0),{listLoading:a,showModal:s,closeModal:U,accept:i,cate:n,list:o,select:r,isSelectItem:ae,selectItem:w,submit:T,filter:u,editData:m,isMultiple:d,typeOption:f,fileChange:se,uploadProgress:B,pageTotal:p,addCate:yt,cateAddStatus:ie,cateAddValue:A,delCate:vt,api:t}},render(){return l(c("a-modal"),{modalClass:"file-manage page-dialog max-w-screen-md w-full",visible:this.showModal,closable:!1,footer:!1,onClose:this.closeModal,onCancel:this.closeModal},{default:()=>[l("div",{class:"arco-modal-header flex gap-2"},[l("div",{class:"flex-grow flex flex-row gap-2"},[!!this.filter.id&&l(c("a-upload"),{action:O(this.api.upload),accept:this.accept,headers:{Accept:"application/json",Authorization:`${q().token||""}`},data:{id:this.filter.id},onChange:this.fileChange,multiple:!0,showFileList:!1},{default:()=>[this.uploadProgress.status?this.uploadProgress.progress+"%":"\u4E0A\u4F20\u6587\u4EF6"]})]),l("div",{class:"flex-none flex flex-row gap-2"},[this.typeOption.length>1&&l("div",{class:"w-32"},[l(c("a-select"),{modelValue:this.filter.filter,"onUpdate:modelValue":e=>this.filter.filter=e,options:this.typeOption},null)]),l("div",{class:"w-32"},[l(c("a-input"),{modelValue:this.filter.keyword,"onUpdate:modelValue":e=>this.filter.keyword=e,type:"text",placeholder:"\u641C\u7D22"},null)])]),l("div",{class:"flex-none"},[l("div",{class:"arco-icon-hover arco-icon-hover-size-medium",onClick:this.closeModal},[l(c("icon-close"),null,null)])])]),l("div",{class:"flex flex-row items-stretch  "},[l("div",{class:"flex-none manage-sidebar w-40 border-r border-gray-300 dark:border-blackgray-2 h-96 overflow-y-auto block"},[l("ul",null,[this.cate.map((e,t)=>l("li",{class:`cate-item flex justify-between py-3 px-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-blackgray-2 dark:text-gray-400  ${this.filter.id===e.dir_id?"active text-blue-600 dark:text-blue-600":""}`,onClick:()=>this.filter.id=e.dir_id},[l("div",{class:"flex gap-2 items-center"},[l(c("icon-folder"),null,null),e.name]),l("span",{class:"del",onClick:a=>{this.delCate(t)}},[l(c("icon-delete"),null,null)])])),l("li",{class:"p-3"},[l(c("a-input"),{class:"add",modelValue:this.cateAddValue,"onUpdate:modelValue":e=>this.cateAddValue=e,onBlur:this.addCate,type:"text",placeholder:"\u6DFB\u52A0\u65B0\u5206\u7C7B",loading:this.cateAddStatus},null)])])]),l("div",{class:"flex-grow manage-main  dark:bg-blackgray-2 h-96 overflow-y-auto"},[l(c("a-spin"),{loading:this.listLoading,class:"block",tip:"\u8F7D\u5165\u6587\u4EF6\u4E2D\uFF0C\u8BF7\u7A0D\u7B49..."},{default:()=>[this.list.length>0&&l("ul",{class:"files-list grid lg:grid-cols-4 md:grid-cols-3 grid-cols-2 gap-5 p-4"},[this.list.map(e=>l("li",{onClick:()=>this.selectItem(e)},[l("div",{class:`item mb-1 mt-1 rounded p-2 text-gray-800 dark:text-gray-300 select-none cursor-pointer${this.isSelectItem(e)?" active bg-gray-100 text-blue-600 dark:bg-blackgray-3 dark:text-blue-600":""}`,"data-id":"550"},[l("div",{class:"h-20 rounded bg-cover bg-center bg-no-repeat rounded",style:{backgroundImage:`url(${e.url})`}},null),l("div",{class:"mt-1"},[l("div",{class:"truncate"},[e.title]),l("div",{class:"text-xs text-gray-500 truncate"},[e.time]),l("div",{class:"text-xs text-gray-500 truncate"},[e.size])])])]))]),this.pageTotal>1&&l("div",{class:"flex justify-center py-2"},[l(c("a-pagination"),{current:this.filter.page,"onUpdate:current":e=>this.filter.page=e,total:this.pageTotal,pageSize:this.pageSize},null)]),this.list.length===0&&l("div",{class:"flex flex-col justify-center items-center h-96"},[l(c("a-empty"),null,null)])]})])]),this.isMultiple&&l("div",{class:"arco-modal-footer flex items-center gap-4 flex-row"},[l(c("c-scrollbar"),{class:"flex-grow",trigger:"hover",direction:"x"},{default:()=>[l("div",{class:"flex gap-2 flex-nowrap flex-row flex-shrink-0"},[this.select.map(e=>l("div",{class:"relative flex-shrink-0",key:e.file_id,onClick:()=>this.selectItem(e)},[l("img",{class:"w-8 h-8 rounded",src:e.url},null),l("div",{class:"absolute inset-0 bg-black bg-opacity-60 text-xs opacity-0  flex items-center justify-center text-white hover:opacity-100 select-none"},[C("\u5220\u9664")])]))])]}),l("div",{class:"flex-none justify-end flex gap-2"},[l(c("a-button"),{onClick:this.closeModal},{default:()=>[C("\u5173\u95ED")]}),l(c("a-button"),{type:"primary",onClick:this.submit},{default:()=>[C("\u786E\u5B9A")]})])])]})}});function vs(e={}){return new Promise((t,a)=>{const s=document.createElement("div");document.body.appendChild(s);const i=me(ys,b({close:()=>{setTimeout(()=>{i.unmount(),document.body.contains(s)&&document.body.removeChild(s)},500)},callback:t},e));i.use(ye),i.use(ve).mount(s)})}var ws=L({props:{type:{type:String,default:"prompt"},title:{type:String,default:""},value:{type:String,default:""},callback:Function,close:Function},data(){return{show:!0,modelValue:this.value}},methods:{hidden(){this.show=!1,this.close()}},render(){if(this.type==="prompt")return l(c("a-modal"),{visible:this.show,title:this.title||"\u8BF7\u8F93\u5165\u5185\u5BB9","onUpdate:visible":e=>this.show=e,onOk:()=>{this.$emit("update:value",this.modelValue),this.callback&&this.callback(this.modelValue),this.hidden()},onClose:this.hidden,onCancel:this.hidden},{default:()=>[l("div",null,[l(c("a-input"),{"model-value":this.modelValue,"onUpdate:model-value":e=>this.modelValue=e,placeholder:""},null)])]})}});function Oe(e={}){return new Promise((t,a)=>{const s=document.createElement("div");document.body.appendChild(s);const i=me(ws,b({close:()=>{setTimeout(()=>{i.unmount(),document.body.contains(s)&&document.body.removeChild(s)},500)},callback:t},e));i.use(ye),i.use(ve).mount(s)})}Oe.prompt=(e={})=>(e.type="prompt",Oe(e));function bs(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ke(e)}var xs=L({props:{title:{type:String},column:{type:Array},url:{type:String},key:{type:String,default:"id"},type:{type:Array},search:{type:Boolean,default:!0},multiple:{type:Boolean,default:!0},callback:Function,close:Function},created(){let e=[];this.column.map(t=>{const a={title:t.name,dataIndex:t.key,render:null};t.type==="image"&&(a.render=s=>l(c("a-avatar"),{shape:"square",size:"30"},{default:()=>[l("img",{src:s.record[t.key]},null)]})),e.push(a)}),this.columns=e,this.type&&(this.filter.type=this.type[0].key)},mounted(){this.getList()},watch:{filter:{handler(e){this.pagination.current=1,this.getList(e)},deep:!0}},data(){return{width:"max-w-4xl w-auto",filter:{query:"",type:""},show:!0,loading:!0,columns:[],data:[],checked:[],pagination:{current:1,total:0,pageSize:1,onChange:e=>{this.pagination.current=e,this.getList(this.filter)},onPageSizeChange:e=>{this.pagination.current=1,this.pagination.pageSize=e,this.getList(this.filter)}}}},methods:{getList(e){this.loading=!0,de({url:O(this.url),data:$(b({},e),{page:this.pagination.current})},"data-table").then(t=>{this.pagination.total=t.total,this.pagination.pageSize=t.pageSize,this.data=t.data,this.loading=!1}).catch(()=>{this.loading=!1})},onCancel(){this.show=!1,this.checked=[],this.close()},onSave(){const e=this.data.filter(t=>~this.checked.indexOf(t[this.key]));this.show=!1,this.checked=[],this.callback&&this.callback(this.multiple?e:e[0]||{}),this.close()}},render(){let e;return l(c("a-modal"),{modalClass:this.width,visible:this.show,title:this.title||"\u9009\u62E9\u6570\u636E",onCancel:this.onCancel,onClose:this.onCancel,onOk:this.onSave,okButtonProps:{disabled:!this.checked.length}},{default:()=>[l("div",null,[l("div",{class:"flex gap-4 mb-3"},[this.type&&l("div",{class:"flex-grow"},[l(c("a-radio-group"),{type:"button",modelValue:this.filter.type,"onUpdate:modelValue":t=>this.filter.type=t},bs(e=this.type.map((t,a)=>l(c("a-radio"),{value:t.key},{default:()=>[t.name]})))?e:{default:()=>[e]})]),this.search&&l("div",{class:"flex-none flex gap-4"},[l("div",null,[l(c("a-input"),{placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9",modelValue:this.filter.query,"onUpdate:modelValue":t=>this.filter.query=t},null)])])]),l(c("a-table"),{loading:this.loading,columns:this.columns,data:this.data,rowKey:this.key,rowSelection:{type:this.multiple?"checkbox":"radio",showCheckedAll:this.multiple,selectedRowKeys:this.checked},onSelectionChange:t=>{this.checked=t},pagination:this.pagination},null)])]})}});function ks(e={}){return new Promise((t,a)=>{const s=document.createElement("div");document.body.appendChild(s);const i=me(xs,b({close:()=>{setTimeout(()=>{i.unmount(),document.body.contains(s)&&document.body.removeChild(s)},500)},callback:t},e));i.use(ye),i.use(ve).mount(s)})}const Cs={name:"Page",props:["show"],setup(){window.message=jt,window.dialog=Pt,window.notification=Ot,window.fileManage=vs,window.appDialog=Oe,window.appDialogTable=ks},components:{Login:ja,PageContent:ls,AppMenu:ds,Download:ms},mounted(){},data(){return{logo:Be,menu:[],apps:[],currentUrl:location.pathname+location.search,dialogRouter:[],currentIndexs:[],appInfo:window.appConfig,userInfo:{},darkMode:localStorage.getItem("darkMode")==="dark"?"dark":"light",menuShow:!0}},watch:{currentIndexs(e){const t=(a=e,s=this.menu,i=[])=>{var o;const n=s[a[0]];return n&&(i.push({name:n.title||n.name,url:n.url}),((o=n.menu)==null?void 0:o.length)&&t(a.slice(1),n.menu,i)),i};Qe.emit(t())}},created(){x.add("router-change",({url:t,pathChange:a,agree:s})=>{(a||["push","replace","popstate"].includes(s))&&(this.currentUrl=t,this.menuHover())});let e=0;x.add("router-dialog",({url:t,mode:a})=>{this.dialogRouter.push({key:e++,url:t,mode:a})}),x.add("request-menu-select",t=>{this.menuHover(void 0,void 0,t)}),st(t=>{t?(E({url:"menu"}).then(a=>{this.menu=a.list,this.apps=a.apps,this.menuHover(),this.menu[0].url?F.indexPage=this.menu[0].url:F.indexPage=this.menu[0].menu[0].menu[0].url,!this.currentIndexs.length&&et(this.currentUrl)&&F.replace(F.indexPage),this.$nextTick(()=>{this.startNotify()}),a.static&&W.pageLoad(a.static,"app-global-static")}),this.userInfo=q()):this.userInfo={}}),x.add("app-notify-read",()=>{this.readNotify()}),x.add("app-notify-del",()=>{this.delNotify()})},methods:{startNotify(){this.getNotify(),setTimeout(()=>{this.startNotify()},60*1e3)},getNotify(){E({url:"notification"}).then(e=>{window.dataNotify={list:e.list,num:e.num},x.emit("app-notify")})},readNotify(){window.dataNotify&&(window.dataNotify.list=window.dataNotify.list.map(e=>(e.read=1,e)),window.dataNotify.num=0),x.emit("app-notify"),E({url:"notification/read"})},delNotify(){window.dataNotify={list:[],num:0},x.emit("app-notify"),E({url:"notification/del"})},closeDialog(e){const[t]=this.dialogRouter.splice(e,1);x.emit("router-dialog-close",{item:t,index:e})},target(e){F.push(e.url||e.menu[0].menu[0].url)},menuHover(e=this.menu,t=[],a=this.currentUrl){return e.findIndex((s,i)=>{if(s.menu&&s.menu.length>0){if(~this.menuHover(s.menu,[...t,i],a))return!0}else if(s.url&&a.split("?")[0].split("/").slice(0,4).join("/")===s.url.split("?")[0].split("/").slice(0,4).join("/"))return t.push(i),this.currentIndexs=t,!0})}}},Fs={class:"flex flex-row h-screen overflow-hidden"},Ds={class:"text-white w-16 bg-gray-800 dark:bg-blackgray-4 px-1.5 flex-none flex-col flex border-r border-gray-800 dark:border-blackgray-5"},_s={class:"rounded-full h-8 w-8 flex items-center justify-center bg-white mt-5"},Ss=["src"],As=["onClick"],Es=["innerHTML"],Ts={class:"text-xs"},Ms={class:"flex-none"},Ls=g("div",{class:"cursor-pointer rounded-sm py-1.5 text-center flex items-center justify-center gap-1 text-gray-200 hover:bg-gray-700 dark:hover:text-gray-50 hover:text-white dark:hover:bg-blackgray-1 relative mb-2"},[g("span",{class:"w-5 h-6 flex items-center justify-center"},[g("svg",{class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[g("path",{d:"M174.5 463.397h295.714V184.125c0-54.766-43.763-104.093-104.093-104.093H174.5c-60.206 0-104.093 49.327-104.093 104.093v180.742c0.123 54.643 43.887 98.53 104.093 98.53z",fill:"#F36A5A","p-id":"10025"}),g("path",{d:"M952.852 364.744V184.125c0-54.766-43.764-104.093-104.094-104.093h-191.62c-54.767 0-104.094 43.764-104.094 104.093v284.712h295.714c60.33-5.44 104.094-49.327 104.094-104.093z",fill:"#F1C40F","p-id":"10026"}),g("path",{d:"M656.52 934.29h197.183c54.767 0 98.53-43.763 98.53-104.093V649.579c0-54.767-43.763-104.094-104.093-104.094H552.426v284.712c0 54.89 43.764 104.093 104.093 104.093z",fill:"#45BE89","p-id":"10027"}),g("path",{d:"M174.5 934.29h191.62c54.767 0 104.094-43.763 104.094-104.093V550.925H174.5c-54.766 0-104.093 43.764-104.093 104.093V835.76c0.123 49.327 43.887 98.53 104.093 98.53z",fill:"#5491DE","p-id":"10028"})])])],-1),Ns={class:"flex flex-row flex-wrap max-w-md gap-4 p-2 bg-white border-gray-100 dark:bg-blackgray-3 rounded shadow border dark:border-blackgray-4"},Bs=["onClick"],js=["innerHTML"],Ps={class:"truncate"},Os={key:0,class:"flex-grow dark:text-gray-200",id:"page-animation"};function Is(e,t,a,s,i,n){const o=c("c-scrollbar"),r=c("a-trigger"),u=c("AppMenu"),p=c("PageContent"),h=c("Download"),f=c("Login");return v(),D(R,null,[g("div",Fs,[g("div",Ds,[g("div",{class:"flex-none cursor-pointer flex flex-col items-center justify-center mb-4",onClick:t[0]||(t[0]=d=>i.menuShow=!i.menuShow)},[g("div",_s,[g("img",{class:"w-6 h-6",src:i.appInfo.logo||i.logo},null,8,Ss)])]),l(o,{class:"flex-grow",trigger:"hover"},{default:V(()=>[(v(!0),D(R,null,ee(i.menu,(d,m)=>It((v(),D("div",{key:d.app,onClick:A=>n.target(d)},[g("div",{class:te(["cursor-pointer rounded-sm py-1 text-center flex flex-col items-center justify-center gap-1 text-gray-200 hover:bg-gray-700 hover:text-white dark:hover:text-gray-50 dark:hover:bg-blackgray-1 relative mb-2",{"!bg-blue-600 !hover:bg-blue-600 !text-white":i.currentIndexs[0]===m}])},[d.icon?(v(),D("span",{key:0,class:"w-5 h-6 flex items-center justify-center",innerHTML:d.icon},null,8,Es)):z("",!0),g("div",Ts,P(d.name),1)],2)],8,As)),[[Ut,!d.hidden||i.currentIndexs[0]===m]])),128))]),_:1}),g("div",Ms,[l(r,{position:"rb",trigger:"click","show-arrow":!1},{content:V(()=>[g("div",Ns,[(v(!0),D(R,null,ee(i.apps,(d,m)=>(v(),D("div",{class:"flex flex-col gap-2 overflow-hidden items-center justify-center cursor-pointer relative rounded text-gray-700 hover:bg-gray-100 dark:text-gray-200 dark:hover:text-gray-50 dark:hover:text-white dark:hover:bg-blackgray-1 p-2 transition",key:m,onClick:A=>n.target(d)},[d.icon?(v(),D("div",{key:0,class:"w-10 h-10 text-white p-2 rounded",style:le({"background-color":d.color||"#1e5eff"}),innerHTML:d.icon},null,12,js)):z("",!0),g("div",Ps,P(d.name),1)],8,Bs))),128))])]),default:V(()=>[Ls]),_:1})])]),l(u,{menu:i.menuShow?i.menu[i.currentIndexs[0]]:{name:"\u9690\u85CF"},select:i.currentIndexs},null,8,["menu","select"]),a.show?(v(),D("div",Os,[l(p,{currentUrl:i.currentUrl,windowType:"page"},null,8,["currentUrl"])])):z("",!0)]),(v(!0),D(R,null,ee(i.dialogRouter,(d,m)=>(v(),H(p,{key:d.key,currentUrl:d.url,windowType:"dialog",mode:d.mode,onCloseDialog:A=>n.closeDialog(m)},null,8,["currentUrl","mode","onCloseDialog"]))),128)),l(h),l(f)],64)}var Us=K(Cs,[["render",Is]]);const $s={name:"App",components:{Page:Us},data(){return{show:!0,zhCN:$t}},created(){window.Apex={chart:{locales:[{name:"zh-CN",options:{months:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],shortMonths:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],days:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],shortDays:["\u5468\u65E5","\u5468\u4E00","\u5468\u4E8C","\u5468\u4E09","\u5468\u56DB","\u5468\u4E94","\u5468\u516D"],toolbar:{exportToSVG:"\u4E0B\u8F7D SVG",exportToPNG:"\u4E0B\u8F7D PNG",exportToCSV:"\u4E0B\u8F7D CSV",menu:"\u83DC\u5355",selection:"\u9009\u62E9",selectionZoom:"\u9009\u62E9\u5927\u5C0F",zoomIn:"\u653E\u5927",zoomOut:"\u7F29\u5C0F",pan:"\u79FB\u52A8",reset:"\u91CD\u7F6E"}}}],fontFamily:"inherit",defaultLocale:"zh-CN",background:"transparent",foreColor:"#373d3f"},tooltip:{theme:"light"},theme:{mode:"light",palette:"palette1"}},x.add("switch-dark",t=>{this.switchDark(t)}),this.switchDark(localStorage.getItem("darkMode")==="dark"?"dark":"light");const e=window.appConfig;e.pusher&&e.pusher.status},methods:{switchDark(e){localStorage.setItem("darkMode",e),this.show=!1,window.darkMode=e,window.Apex.tooltip.theme=e,window.Apex.theme.mode=e,window.Apex.chart.foreColor=e==="dark"?"#f6f7f8":"#373d3f",e==="dark"?(document.body.classList.add("dark"),document.body.setAttribute("arco-theme","dark")):(document.body.classList.remove("dark"),document.body.removeAttribute("arco-theme")),this.$nextTick(()=>{this.show=!0})}}},zs={id:"app",class:"bg-gray-100 dark:bg-blackgray-1"};function Vs(e,t,a,s,i,n){const o=c("Page"),r=c("a-config-provider");return v(),H(r,{locale:i.zhCN},{default:V(()=>[g("div",zs,[l(o,{show:i.show},null,8,["show"])])]),_:1},8,["locale"])}var Rs=K($s,[["render",Vs]]);const Hs=(e="yyyy-MM-dd HH:mm:ss",t)=>{t=Ce(t);let a=e,s=["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"];return a=a.replace(/yyyy|YYYY/,t.getFullYear()),a=a.replace(/yy|YY/,t.getYear()%100>9?(t.getYear()%100).toString():"0"+t.getYear()%100),a=a.replace(/MM/,t.getMonth()>8?t.getMonth()+1:"0"+(t.getMonth()+1)),a=a.replace(/M/g,t.getMonth()+1),a=a.replace(/w|W/g,s[t.getDay()]),a=a.replace(/dd|DD/,t.getDate()>9?t.getDate().toString():"0"+t.getDate()),a=a.replace(/d|D/g,t.getDate()),a=a.replace(/hh|HH/,t.getHours()>9?t.getHours().toString():"0"+t.getHours()),a=a.replace(/h|H/g,t.getHours()),a=a.replace(/mm/,t.getMinutes()>9?t.getMinutes().toString():"0"+t.getMinutes()),a=a.replace(/m/g,t.getMinutes()),a=a.replace(/ss|SS/,t.getSeconds()>9?t.getSeconds().toString():"0"+t.getSeconds()),a=a.replace(/s|S/g,t.getSeconds()),a},Ce=(e=new Date)=>{if(typeof e!="object"){e=String(e);const t=e.length;if(t==10)e+="000",e=new Date(e*1);else if(t==13)e=new Date(e*1);else if(t<10){let a=(Array(10).join(0)+e).slice(-10);a+="000",e=new Date(a*1)}else e=new Date}return e},qs=(e,t,a)=>{switch(e){case"s":return parseInt((a-t)/1e3);case"n":return parseInt((a-t)/6e4);case"h":return parseInt((a-t)/36e5);case"d":return parseInt((a-t)/864e5);case"w":return parseInt((a-t)/(864e5*7));case"m":return a.getMonth()+1+(a.getFullYear()-t.getFullYear())*12-(t.getMonth()+1);case"y":return a.getFullYear()-t.getFullYear()}},Ks=(e,t,a=new Date)=>{switch(e){case"s":return new Date(a.getTime()+1e3*t);case"n":return new Date(a.getTime()+6e4*t);case"h":return new Date(a.getTime()+36e5*t);case"d":return new Date(a.getTime()+864e5*t);case"w":return new Date(a.getTime()+864e5*7*t);case"m":return new Date(a.getFullYear(),a.getMonth()+t,a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds());case"y":return new Date(a.getFullYear()+t,a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds())}},Gs=(e=new Date)=>(typeof e!="object"&&(e=rt(e)),e.getYear()%4==0&&(e.getYear()%100!=0||e.getYear()%400==0)),rt=e=>{const t=/(\d{1,4})/gm;return new Date(...e.match(t).map((a,s)=>s===1?--a:a))},Js=(e,t)=>{let a=0,s=-1;const i=t.length;(s=e.indexOf("yyyy"))>-1&&s<i&&(a=t.substr(s,4));let n=0;(s=e.indexOf("MM"))>-1&&s<i&&(n=parseInt(t.substr(s,2))-1);let o=0;(s=e.indexOf("dd"))>-1&&s<i&&(o=parseInt(t.substr(s,2)));let r=0;((s=e.indexOf("HH"))>-1||(s=e.indexOf("hh"))>1)&&s<i&&(r=parseInt(t.substr(s,2)));let u=0;(s=e.indexOf("mm"))>-1&&s<i&&(u=t.substr(s,2));let p=0;return(s=e.indexOf("ss"))>-1&&s<i&&(p=t.substr(s,2)),new Date(a,n,o,r,u,p)},Ys=(e=new Date)=>e.getTime(),Ws=e=>new Date(e),ct=e=>/^\d+$/g.test(e),Qs=(e,t="yyyyMMdd")=>{const a=t.indexOf("yyyy");if(a==-1)return!1;const s=e.substring(a,a+4),i=t.indexOf("MM");if(i==-1)return!1;const n=e.substring(i,i+2),o=t.indexOf("dd");if(o==-1)return!1;const r=e.substring(o,o+2);return!(!ct(s)||s>"2100"||s<"1900"||!ct(n)||n>"12"||n<"01"||r>ut(s,n)+""||r<"01")},ut=(e,t)=>t==4||t==6||t==9||t==11?30:t==2?e%4==0&&e%100!=0||e%400==0?29:28:31,Xs=(e=new Date)=>{e.setDate(1),e.setMonth(e.getMonth()+1);const t=e.getTime()-24*60*60*1e3;return new Date(t).getDate()},Zs=(e,t=new Date)=>{let a="";const s=["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"];switch(e){case"y":a=t.getFullYear();break;case"M":a=t.getMonth()+1;break;case"d":a=t.getDate();break;case"w":a=s[t.getDay()];break;case"ww":a=t.WeekNumOfYear();break;case"h":a=t.getHours();break;case"m":a=t.getMinutes();break;case"s":a=t.getSeconds();break}return a},Ie=(e,t="d\u5929H\u65F6M\u5206S\u79D2",a=!1,s=!1)=>{a&&(e=Ce(e).getTime()-new Date().getTime()),e=Math.max(0,e);const i=(o,r=2)=>r===2?`${o>9?o:"0"+o}`:`${o>99?o:o>9?"0"+o:"00"+o}`,n={d:Math.floor(e/1e3/86400),h:Math.floor(e/1e3/3600%24),m:Math.floor(e/1e3/60%60),s:Math.floor(e/1e3%60),ms:Math.floor(e%1e3)};return s?n:t.replace("d",n.d).replace("D",i(n.d)).replace("h",n.h).replace("H",i(n.h)).replace("ms",n.ms).replace(/Ms|mS|MS/,i(n.ms,3)).replace("m",n.m).replace("M",i(n.m)).replace("s",n.s).replace("S",i(n.s))};class ei{constructor(){G(this,"time",0);G(this,"formatStr");G(this,"onFunc",null);G(this,"stopFunc",null);G(this,"timer",null)}onTime(t){this.onFunc=t}onStop(t){this.stopFunc=t}start(t,a,s=!1,i=1e3){this.timer&&this.stop(),s&&(t=Ce(t).getTime()-new Date().getTime()),this.formatStr=a,this.time=t,this.onFunc&&this.onFunc(Ie(this.time,this.formatStr)),this.timer=setInterval(()=>{if(this.time-=i,this.time<=0){this.stop(),this.stopFunc&&this.stopFunc();return}this.onFunc&&this.onFunc(Ie(this.time,this.formatStr))},i)}stop(){this.timer&&(clearInterval(this.timer),this.timer=null)}}const ti=e=>{e=Ce(e);const t=new Date(e);e={time:e.getTime(),year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate(),hour:e.getHours(),minute:e.getMinutes()};const a={time:t.getTime(),year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()};return a.time-e.time<60?"\u521A\u521A":a.time-e.time<600?((a.time-e.time)/60|0)+"\u5206\u949F\u524D":e.year===a.year&&e.month===a.month&&e.day===a.day?`${e.hour}:${e.minute}`:e.year===a.year?`${e.month}-${e.day}`:`${e.month}\u5E74`},ai={data:{timers:[]},timer:null,timerOut:[],onTime(e,t){const{timers:a}=this.data,s=new Date().getTime();for(let i=0,n=e.length;i<n;i++){const o=e[i];if(s>o)continue;let r=!1;for(let u=0,p=a.length;u<p;u++){const h=a[u].time,f=u===0?s:a[u-1].time;if(o>f&&o<h){a.splice(u,0,{time:o,callback:[t]}),r=!0;break}if(o===h){a[u].callback.push(t),r=!0;break}}!r&&a.push({time:o,callback:[t]})}this.timer||this.startTimer()},offTime(e){const{timers:t}=this.data;if(!e){t.splice(0,t.length);return}for(let a=t.length-1;a>0;a--){const s=t[a].callback;for(let i=s.length-1;i>=0;i--)s[i]===e&&s.splice(i,1);s.length===0&&t.splice(a,1)}},startTimer(){const{timers:e}=this.data;this.clear(),this.timer=setInterval(()=>{const t=new Date().getTime();let a=0;for(let s=0,i=e.length;s<i&&!(e[s].time>t+6e3);s++)a++;e.splice(0,a).map(s=>s.time-t>0&&setTimeout(()=>s.callback.map(i=>i(s.time)),s.time-t))},5e3)},clear(){this.timer&&(clearInterval(this.timer),this.timer=null)}};var dt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",dateToStr:Hs,dateDiff:qs,dateAdd:Ks,isLeapYear:Gs,strToDate:rt,strFormatToDate:Js,dateToLong:Ys,longToDate:Ws,isDate:Qs,getMaxDay:ut,maxDayOfDate:Xs,datePart:Zs,endTime:Ie,dateBeautiful:ti,countDown:ei,Timer:ai});window.dateUtil=dt;const M={menuDom:null,callback:[],close(){document.removeEventListener("click",M.close),M.callback[1]&&M.callback[1]("\u6B63\u5E38\u5173\u95ED"),M.removeEle()},removeEle(){!M.menuDom||(M.callback=[],document.body.removeChild(M.menuDom),M.menuDom=null)}},si=window.openGlobalMenu=({list:e,event:t})=>{M.menuDom&&M.close();const a=e.map(u=>`<div class='item'>${u.text}</div>`).join("");M.menuDom=document.createElement("div"),M.menuDom.classList.add("global-menus"),M.menuDom.innerHTML=a,je(10).then(()=>{document.addEventListener("click",M.close)}),document.body.appendChild(M.menuDom);const[s,i]=[document.body.clientWidth,document.body.clientHeight],n=M.menuDom.getBoundingClientRect(),[o,r]=[Math.min(t.x,s-n.width),Math.min(t.y,i-n.height)];return M.menuDom.style.left=o+"px",M.menuDom.style.top=r+"px",document.querySelectorAll(".global-menus > .item").forEach((u,p)=>{u.onclick=()=>{M.callback[0]&&M.callback[0]({index:p,item:e[p]}),M.removeEle()}}),new Promise((u,p)=>{M.callback=[u,p]})};var ii=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",openMenu:si});const Ue=e=>{var a;return((a=e==null?void 0:e.$options)==null?void 0:a.name)==="PageContent"?e:e.$parent?Ue(e.$parent):void 0};var li=L({props:{url:{type:String,default:()=>window.location.href},urlBind:{type:Boolean,default:!1},defaultData:Object,editUrl:{type:String,default:""},columns:{type:Array,default:()=>[]},filter:{type:Object,default:()=>({})},"n-params":{type:Object,default:()=>({})},select:{type:Boolean,default:!1},simple:{type:Boolean,default:!1},limit:{type:Number,default:20},requestEventName:{type:String,default:null},nowrap:{type:Boolean,default:!1}},watch:{defaultData(e){e instanceof Array&&(this.data=this.formatData(e))}},setup(e){const t=(y,w=e.columns.filter(T=>T.replace))=>y.map(T=>(T.__loading=!1,w.length&&w.forEach(U=>{T[U.dataIndex]=T[U.dataIndex].replace(U.replace,"")}),T.children&&(T.children=t(T.children,w)),T)),a=k([]),s=k(t(e.defaultData||[])),i=k({}),n=()=>a.value.length,o=(y,w,T="warning")=>{if(!a.value.length){window.message.warning("\u8BF7\u9009\u62E9\u9879\u76EE\u540E\u518D\u8FDB\u884C\u64CD\u4F5C\uFF01");return}const U=()=>{var B;typeof y=="string"&&(y={url:y,method:"POST"}),((B=y.data)==null?void 0:B.ids)||(typeof y.data=="undefined"&&(y.data={}),y.data.ids=a.value),y.method||(y.method="POST"),y.urlType||(y.urlType="absolute"),typeof y.successMsg=="undefined"&&(y.successMsg=!0),E(y).then(p)};w?window.dialog[T]({title:"\u64CD\u4F5C\u63D0\u9192",content:w,hideCancel:!1,onOk:U}):U()},r=k({showTotal:!e.simple,showJumper:!e.simple,showPageSize:!e.simple,simple:e.simple,total:0,current:1,pageSize:e.limit,onChange:y=>{r.value.current=y,p(e.filter)},onPageSizeChange:y=>{r.value.pageSize=y,r.value.current=1,p(e.filter)}}),u=k(!1),p=(y={})=>{e.defaultData||(u.value=!0,de({url:O(e.url),data:$(b({},y),{_sort:i.value,page:r.value.current,limit:r.value.pageSize})},"data-table").then(w=>{r.value.total=w.total,r.value.pageSize=w.pageSize,s.value=t(w.data),u.value=!1}).catch(()=>{u.value=!1}))},h={checkedRowKeys:a,checkRow:n,getList:p,checkAction:o},f=(y,w,T=s.value,U=null)=>{T.some((B,se,ie)=>B[e.nParams["row-key"]]==y?(B.__loading=!1,w(B,se,ie,U),!0):B.children?f(y,w,B.children,B):!1)},d=y=>{!y||(Array.isArray(y)||(y=[y]),y.forEach(w=>{if(w.data&&(w.data=t([w.data])[0]),w.type==="add"&&!w.parentKey){s.value[w.pos==="end"?"push":"unshift"](w.data);return}f(w.type==="add"?w.parentKey:w.key,(T,U,B)=>{var se;switch(w.type){case"edit":{B[U]=w.data,!((se=B[U].children)==null?void 0:se.length)&&T.children&&(B[U].children=T.children);break}case"add":{T.children||(T.children=[]),T.children[w.pos==="end"?"push":"unshift"](w.data),r.value.total+=1;break}case"del":{B.splice(U,1),r.value.total-=1;break}}})}))};e.requestEventName&&re.add(e.requestEventName,d);const m=({params:y,agree:w})=>{w==="routerPush"&&(r.value.current=1,p(y))};e.urlBind?(x.add("router-change",m),ge(e.filter,y=>{F.routerPush(void 0,Object.fromEntries(Object.keys(y).filter(w=>y[w]!==null).map(w=>[w,y[w]])))}),F.routerPush(void 0,Object.fromEntries(Object.keys(e.filter).filter(y=>e.filter[y]!==null).map(y=>[y,e.filter[y]])))):(ge(e.filter,y=>{r.value.current=1,p(y)}),p(e.filter));const A=(y,w)=>{w?(i.value={},i.value[y]=w==="ascend"?"asc":"desc"):i.value={},p(e.filter)},N=k({status:!1}),I=(y=this.editUrl,w,T)=>{N.value.status||(N.value={status:!0,data:w,index:T},E({url:y,urlType:"absolute",method:"post",data:w}).finally(()=>{N.value={status:!1}}))},X={sortDirections:["ascend","descend"]},ae=e.columns.map(y=>Q.call({colSortable:X},y,{editValue:I,editStatus:N}));return{formatData:t,sorter:A,pagination:r,childData:h,data:s,loading:u,columnsRender:ae,getList:p,routerChange:m,checkedRowKeys:a,requestEventCallBack:d}},beforeUnmount(){x.remove("router-change",this.routerChange),re.remove(this.requestEventName,this.requestEventCallBack)},render(){var e,t;return l("div",{class:"relative"},[l(c("a-table"),oe({loading:this.loading},Q.call(this,this.nParams),{pagination:this.defaultData?!1:this.pagination,data:this.data,columns:this.columnsRender,rowSelection:this.select?{type:"checkbox",selectedRowKeys:this.checkedRowKeys,showCheckedAll:!0}:!1,onSorterChange:this.sorter,onSelectionChange:a=>{this.checkedRowKeys=a}}),{tbody:()=>l("tbody",{style:this.nowrap?{whiteSpace:"nowrap"}:{}},null)}),l("div",{class:"absolute bottom-0 z-10 "},[(t=(e=this.$slots).footer)==null?void 0:t.call(e,this.childData)])])}});const ni=L({components:{},props:{url:{type:String,default:window.location.href},method:{default:"POST",validator(e){return["POST","GET","post","get"].includes(e)}},back:{type:Boolean,default:!0},value:{type:Object,default:()=>({})},layout:{type:String,default:"horizontal"}},setup(e,t){const a=k(null),s=k({}),i=zt(),n=k(!1),o=k(!0);return{formRef:a,rules:s,submit:(h,f)=>{if(n.value||o.value)return!1;n.value=!0;const d=Ue(i.proxy.$parent);E({url:O(e.url),method:e.method,data:e.value,successMsg:!0,header:b({},d?{"x-dialog":"1"}:{})}).then(()=>{d&&e.back&&d.changeRouter(1,"back"),n.value=!1}).catch(m=>{if(n.value=!1,m.status===422){const A=m.data.error,N={};for(const I in A)Object.hasOwnProperty.call(A,I)&&(N[I]={status:"error",message:A[I][0]});a.value.setFields(N)}})},submitError:()=>{o.value=!0},submitSuccess:()=>{o.value=!1},submitStatus:n}}});function oi(e,t,a,s,i,n){const o=c("a-form");return v(),H(o,{ref:"formRef",onSubmit:e.submit,onSubmitFailed:e.submitError,model:e.value,onSubmitSuccess:e.submitSuccess,rules:e.rules,layout:e.layout,"label-align":"left"},{default:V(()=>[Ge(e.$slots,"default",{value:e.value,submitStatus:e.submitStatus})]),_:3},8,["onSubmit","onSubmitFailed","model","onSubmitSuccess","rules","layout"])}var ri=K(ni,[["render",oi]]);const ci={name:"Route",data(){return{className:""}},props:{class:String,href:String,style:String,type:{type:String,default:"push"},method:{type:String,default:"GET"},mode:{type:String,default:"modal"},title:String,before:Function,after:Function},created(){this.className=this.class},methods:{ajaxAction(){this.before&&this.before(),E({url:this.href,method:this.method,successMsg:!0,urlType:"absolute"}).then(e=>{this.after&&this.after(e)}).catch(e=>{this.after&&this.after(e)})},jump(e){if(this.type==="ajax")this.title?window.dialog.info({title:"\u786E\u8BA4\u64CD\u4F5C",content:this.title,hideCancel:!1,onOk:()=>{this.ajaxAction()}}):this.ajaxAction();else if(this.type==="dialog")this.before&&this.before(),F.dialog(this.href,this.mode),setTimeout(()=>{this.after&&this.after()},1e3);else if(["replace","back","push"].includes(this.type)){const t=Ue(this.$parent);t?t.changeRouter(this.href,this.type):F[this.type](this.href)}e==null||e.preventDefault(),this.$emit("click",e)}}};function ui(e,t,a,s,i,n){return v(),D("a",{onClick:t[0]||(t[0]=(...o)=>n.jump&&n.jump(...o)),class:te(["cursor-pointer",i.className]),style:le(a.style)},[Ge(e.$slots,"default",{jump:n.jump})],6)}var ht=K(ci,[["render",ui]]);const di={data(){return{className:""}},props:{class:String,style:String,nodes:String},created(){this.className=this.class}},hi=["innerHTML"];function pi(e,t,a,s,i,n){return v(),D("div",{class:te(i.className),style:le(a.style),innerHTML:a.nodes},null,14,hi)}var fi=K(di,[["render",pi]]);const gi={data(){return{className:""}},props:{name:String,class:String,style:String},created(){this.className=`icon-${this.name} ${this.class||""}`}};function mi(e,t,a,s,i,n){return v(),D("i",{class:te(i.className),style:le(a.style)},null,6)}var yi=K(gi,[["render",mi]]);const Fe={key:"treeExpandedKeysData",get(e){let t=localStorage.getItem(this.key);if(!t)return[];try{return t=JSON.parse(t),t[e]||[]}catch{return[]}},set(e,t){try{let a=localStorage.getItem(this.key);a||(a="{}"),a=JSON.parse(a),a[e]=t,localStorage.setItem(this.key,JSON.stringify(a))}catch{}}};var vi=L({props:{iconColor:{type:Array,default:()=>[]},contextMenus:{type:Array,default:()=>[]},treeData:Array,url:{type:String},sortUrl:{type:String},filter:{type:Object,default:{}},search:{type:Boolean,default:!0},keywords:{type:Array,default:()=>[]},value:{type:[String,Number],default:null},fieldNames:{type:Object,default:{key:"key",title:"title",children:"children"}},requestEventName:{type:String,default:null}},watch:{filter(e,t){JSON.stringify(e)!==JSON.stringify(t)&&(this.data.length&&Fe.set(this.expandedKeysName(t),this.expandedKeys),this.getList())}},data(){return{optionEl:null,popupVisible:!1,loading:!0,draggable:!!this.sortUrl,data:[],originData:[],options:{},expandedKeys:[]}},created(){this.expandedKeysNamePrefix=location.pathname,this.getList(),re.add(this.requestEventName,this.requestEvent)},beforeUnmount(){Fe.set(this.expandedKeysName(),this.expandedKeys),re.remove(this.requestEventName,this.requestEvent)},methods:{loopData(e,t,a=this.data,s=null){a.some((i,n,o)=>i[this.fieldNames.key]===e?(t(i,n,o,s),!0):i[this.fieldNames.children]?this.loopData(e,t,i[this.fieldNames.children],i):!1)},expandedKeysName(e){return this.expandedKeysNamePrefix+"-"+this.url+"-"+Z.stringify(e||this.filter)},renderData(e){let t=(a,s=0)=>a.map(i=>{let n={};n[this.fieldNames.title]=i[this.fieldNames.title],n[this.fieldNames.key]=i[this.fieldNames.key],n.level=s;let o=i[this.fieldNames.children];return o&&o.length&&(n[this.fieldNames.children]=t(o,s+1)),n.rawData=i,n});return e=t(e),e},resetLevel(e=this.data,t=0){e.forEach(a=>{a.level=t,a[this.fieldNames.children]&&a[this.fieldNames.children].length&&this.resetLevel(a[this.fieldNames.children],t+1)})},searchData(e){if(this.loading=!0,this.draggable=!1,!e)return this.draggable=!!this.sortUrl,this.data=this.originData,this.$nextTick(()=>{this.loading=!1}),!1;const t=a=>{const s=[];return a.forEach(i=>{let n=!1;if(i[this.fieldNames.title].toString().toLowerCase().indexOf(e.toLowerCase())>-1&&(n=!0),!n&&i.rawData){for(let o of this.keywords)if(i.rawData[o]&&i.rawData[o].toLowerCase().indexOf(e.toLowerCase())>-1){n=!0;break}}if(n)s.push(b({},i));else if(i[this.fieldNames.children]){const o=t(i[this.fieldNames.children]);o.length&&s.push($(b({},i),{[this.fieldNames.children]:o}))}}),s};this.data=t(this.originData),this.$nextTick(()=>{this.loading=!1})},getList(){if(this.loading=!0,this.data=[],this.treeData){this.expandedKeys=Fe.get(this.expandedKeysName()),this.data=this.originData=this.renderData(this.treeData),this.loading=!1;return}!this.url||de({url:this.url,data:this.filter||{}}).then(e=>{this.loading=!1,this.expandedKeys=Fe.get(this.expandedKeysName()),this.data=this.originData=this.renderData(e.data)}).catch(()=>{this.loading=!1})},requestEvent(e){!e||(Array.isArray(e)||(e=[e]),e.forEach(t=>{if(t.type==="add"&&!t.parentKey){this.data[t.pos!=="end"?"push":"unshift"](this.renderData([t.data])[0]);return}this.loopData(t.type==="add"?t.parentKey:t.key,(a,s,i)=>{var n;t.type==="edit"?(i[s]=this.renderData([t.data])[0],!((n=i[s][this.fieldNames.children])==null?void 0:n.length)&&a[this.fieldNames.children]&&(i[s][this.fieldNames.children]=a[this.fieldNames.children])):t.type==="del"?i.splice(s,1):t.type==="add"&&(a[this.fieldNames.children]||(a[this.fieldNames.children]=[]),a[this.fieldNames.children][t.pos!=="end"?"push":"unshift"](this.renderData([t.data])[0]),this.expandedKeys.includes(t.parentKey)||this.expandedKeys.push(t.parentKey))})}),this.resetLevel())},handleDrop({dragNode:e,dropNode:t,dropPosition:a}){const s={id:e.key,parent:null,before:null,after:null};this.loopData(e.key,(n,o,r)=>{r.splice(o,1)});const i={[this.fieldNames.title]:e[this.fieldNames.title],[this.fieldNames.key]:e[this.fieldNames.key],[this.fieldNames.children]:e[this.fieldNames.children],rawData:e.rawData};e[this.fieldNames.title]===void 0&&(i[this.fieldNames.title]=e.title),e[this.fieldNames.key]===void 0&&(i[this.fieldNames.key]=e.key),e[this.fieldNames.children]===void 0&&(i[this.fieldNames.children]=e.children),a===0?this.loopData(t.key,n=>{n.children=n.children||[],n.children.push(i),s.parent=n[this.fieldNames.key],i.level=n.level+1}):this.loopData(t.key,(n,o,r,u)=>{var h,f;const p=a<0?o:o+1;r.splice(p,0,i),s.before=((h=r[p-1])==null?void 0:h[this.fieldNames.key])||null,s.after=((f=r[p+1])==null?void 0:f[this.fieldNames.key])||null,s.parent=u?u[this.fieldNames.key]:null,i.level=u?u.level+1:0}),this.loading=!0,E({url:this.sortUrl,data:s,method:"POST"}).then(()=>{this.loading=!1}).catch(()=>{this.loading=!1})}},render(){const e=this.iconColor;return l("div",{class:"flex flex-col h-full"},[this.search&&l(c("a-input-search"),{onInput:t=>{this.searchData(t)},class:"mb-2 flex-none",placeholder:"\u641C\u7D22"},null),this.data.length>0?l("div",{class:"flex-grow h-10 app-scrollbar overflow-y-auto overflow-x-hidden"},[l(c("a-spin"),{class:"block flex flex-col h-full",loading:this.loading,tip:"\u52A0\u8F7D\u8282\u70B9\u4E2D..."},{default:()=>[l(c("a-tree"),{class:"app-tree",data:this.data,showLine:!0,blockNode:!0,draggable:this.draggable,onDrop:this.handleDrop,selectedKeys:this.value?[this.value]:null,onSelect:t=>{this.$emit("update:value",this.value===t[0]?null:t[0])},expandedKeys:this.expandedKeys,onExpand:t=>this.expandedKeys=t,fieldNames:this.fieldNames},{title:t=>{const a="bg-"+e[t.level]+"-400",s="border-"+e[t.level]+"-500";return this.contextMenus.length?l(c("a-dropdown"),{trigger:"contextMenu",position:"tr",onSelect:i=>{const n=this.contextMenus.find(o=>o.key===i);new Function("item","options",n.event)(t,this.options)},class:"w-32"},{default:()=>l("div",{class:"flex-grow whitespace-nowrap py-1 flex gap-2 items-center"},[l("span",{class:["inline-flex rounded-full border-2 w-4 h-4",a,s]},null),this.$slots.label?this.$slots.label(t):t[this.fieldNames.title]]),content:()=>this.contextMenus.map(i=>l(c("a-doption"),{value:i.key},{default:()=>[i.text]}))}):l("div",{class:"flex-grow whitespace-nowrap py-1 flex gap-2 items-center "},[l("span",{class:["inline-flex rounded-full border-2 w-4 h-4",a,s]},null),this.$slots.label?this.$slots.label(t):t[this.fieldNames.title]])}})]})]):l(c("a-empty"),null,null)])}}),wi=L({props:{nParams:Object,value:[String,Number,Array],dataUrl:String,optionRender:Function},data(){return{keyword:"",loading:!1,modelValue:null}},async created(){this.dataUrl&&await this.handleSearch("",this.value),this.nParams.options.map(e=>(e.label=e.label.toString(),e)),this.modelValue=this.value},watch:{dataUrl(){this.modelValue=null,this.$emit("update:value",null),this.$emit("update:data",{}),this.handleSearch()}},methods:{updateValue(e){this.modelValue=e,this.$emit("update:value",e),this.$emit("update:item",$(b({},this.nParams.options.find(t=>t.value==e)),{render:void 0}))},handleSearch(e,t){return this.loading=!0,E({url:O(this.dataUrl),method:"get",data:{query:e,id:t}}).then(a=>{this.nParams.options=a.data instanceof Array?a.data.map(s=>{const i={label:s.name.toString(),value:s.id,rowData:s};return this.optionRender&&(i.render=()=>this.optionRender(i)),i}):[],this.loading=!1}).catch(()=>{this.loading=!1})}},render(){return l(c("a-select"),oe(Q.call(this,this.nParams),{modelValue:this.modelValue,loading:this.loading,onSearch:this.dataUrl&&this.handleSearch,onChange:this.updateValue}),null)}}),bi=L({props:{"n-params":{type:Array,default:[]},value:{type:[String,Number,Array]},"data-url":{type:String}},data(){return{loading:!1,search:!1,modelValue:null}},async created(){this.dataUrl&&await this.getData(),this.modelValue=this.value},mounted(){this.search=!0},watch:{dataUrl(){this.modelValue=null,this.$emit("update:value",null),this.getData()}},methods:{getData(){return this.loading=!0,this.nParams.options=[],E({url:O(this.dataUrl),method:"get"}).then(e=>{this.nParams.options=e instanceof Array?e:[],this.loading=!1}).catch(()=>{this.loading=!1})},updateValue(e){this.modelValue=e,this.$emit("update:value",e)},filterTreeNode(e,t){return t.label.toString().toLowerCase().indexOf(e.toString().toLowerCase())>-1}},render(){return l(c("a-tree-select"),oe(Q.call(this,this.nParams),{fieldNames:{key:"value",title:"label",children:"children"},loading:this.loading,modelValue:this.modelValue,allowSearch:this.search,allowClear:!0,onChange:this.updateValue,filterTreeNode:this.filterTreeNode}),null)}}),xi=L({props:{"n-params":{type:Array,default:[]},value:{type:[String,Number,Array]},"data-url":{type:String}},data(){return{loading:!1,search:!1,modelValue:null}},async created(){this.dataUrl&&await this.getData(),this.modelValue=this.value},mounted(){this.search=!0},watch:{dataUrl(){this.modelValue=null,this.$emit("update:value",null),this.getData()}},methods:{getData(){return this.loading=!0,this.nParams.options=[],E({url:O(this.dataUrl),method:"get"}).then(e=>{this.nParams.options=e instanceof Array?e:[],this.loading=!1}).catch(()=>{this.loading=!1})},formatData(e){let t=[];function a(s){for(let i=0;i<s.length;i++)if(s[i].children&&a(s[i].children)||s[i].value==e)return t.push(s[i].label),!0}return a(this.nParams.options),t.reverse()},getLabel(e){let t=[];return Array.isArray(e)?e.forEach(a=>{t.push(this.formatData(a))}):t.push(this.formatData(e)),t},updateValue(e,t){this.modelValue=e;let a=this.getLabel(e);this.$emit("label",a),this.$emit("update:value",e)}},render(){const e=Q.call(this,this.nParams);return l(c("a-spin"),{loading:this.loading,class:"black w-full"},{default:()=>[l(c("a-cascader"),oe(e,{triggerProps:b({alignPoint:!0},e.triggerProps),modelValue:this.modelValue,allowSearch:this.search,allowClear:!0,onChange:this.updateValue}),null)]})}}),ki=L({props:{upload:{type:String,default:"upload"},fileUrl:{type:String,default:"fileManage"},value:{type:[String,Number]},format:{type:String,default:"all,image,video,audio,document,other"},image:{type:Boolean},mini:{type:Boolean},size:{type:Number,default:125},type:{type:String,default:"manage"},link:{type:Boolean,default:!0}},data(){return{formatClone:"",accept:"*.*",visible:!1,prompt:!1,modalValue:"",progress:{status:!1,progress:0},headers:{Accept:"application/json",Authorization:`${q().token||""}`}}},created(){this.format&&(this.formatClone=this.format),this.image&&(this.formatClone="image"),this.accept=ke(this.formatClone)},methods:{fileChange(e,t){t.status==="uploading"?(this.progress.status=!0,this.progress.progress=t.percent*100):t.status==="done"?(this.progress.status=!1,this.$emit("update:value",t.response.data[0].url),this.$emit("upload",t.response.data[0])):t.status==="error"&&window.message.error(t.response.message||"\u4E0A\u4F20\u5931\u8D25")},fileManage(){window.fileManage({type:this.formatClone,uploadUrl:this.upload,fileUrl:this.fileUrl}).then(e=>{this.$emit("update:value",e.url),this.$emit("upload",e)})}},render(){return this.image?l("div",{class:"relative bg-gray-100 hover:bg-gray-200 dark:bg-blackgray-1 dark:hover:bg-blackgray-2 rounded bg-cover bg-center bg-no-repeat block flex items-end ",style:{width:this.size+"px",height:this.size+"px",backgroundSize:"90%",backgroundImage:`url(${this.value||"/service/image/placeholder/180/180/\u9009\u62E9\u56FE\u7247"})`}},[l(c("a-image-preview"),{src:this.value||"/service/image/placeholder/180/180/\u9009\u62E9\u56FE\u7247",visible:this.visible,"onUpdate:visible":e=>this.visible=e},null),this.mini?l("div",{class:"flex-grow flex justify-center items-center text-center w-full h-full opacity-0 hover:opacity-100 hover:bg-white  bg-opacity-30 dark:bg-blackgray-1 dark:bg-opacity-80 dark:hover:bg-blackgray-2 rounded cursor-pointer"},[l(c("a-upload"),{action:O(this.upload),accept:this.accept,headers:this.headers,onChange:this.fileChange,showFileList:!1},{"upload-button":()=>l(c("icon-upload"),null,null)})]):l("div",{class:"flex gap-2 h-7 w-full items-center bg-white bg-opacity-60 dark:bg-blackgray-5 dark:bg-opacity-80"},[l("div",{class:"flex-grow flex justify-center text-center  hover:text-blue-600 cursor-pointer",onClick:()=>{this.visible=!0}},[l(c("icon-eye"),null,null)]),this.type!=="manage"?l("div",{class:"flex-grow flex justify-center text-center hover:text-blue-600 cursor-pointer"},[l(c("a-upload"),{action:O(this.upload),accept:this.accept,headers:this.headers,onChange:this.fileChange,showFileList:!1},{"upload-button":()=>l(c("icon-upload"),null,null)})]):l("div",{class:"flex-grow flex justify-center text-center hover:text-blue-600 cursor-pointer",onClick:this.fileManage},[l(c("icon-upload"),null,null)]),this.link&&l("div",{class:"flex-grow flex justify-center text-center hover:text-blue-600 cursor-pointer"},[l(c("icon-share-alt"),{type:"primary",ghost:!0,size:"small",onClick:()=>{this.prompt=!0}},null),l(c("a-modal"),{visible:this.prompt,title:"\u56FE\u7247\u5730\u5740","onUpdate:visible":e=>this.prompt=e,onOk:()=>{this.$emit("update:value",this.modalValue),this.$emit("upload",{url:this.modalValue})}},{default:()=>[l("div",null,[l(c("a-input"),{"model-value":this.modalValue,"onUpdate:model-value":e=>this.modalValue=e,modelValue:this.value},null)])]})])])]):l("div",{class:"w-full bg-gray-100  rounded hover:bg-gray-200 dark:hover:bg-blackgray-2 dark:border-blackgray-1 dark:bg-blackgray-1  p-4 flex justify-center items-center flex-col"},[l("div",null,[l("svg",{class:"w-12 h-12",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},[l("path",{d:"M918.673 883H104.327C82.578 883 65 867.368 65 848.027V276.973C65 257.632 82.578 242 104.327 242h814.346C940.422 242 958 257.632 958 276.973v571.054C958 867.28 940.323 883 918.673 883z",fill:"#FFE9B4","p-id":"9921"},null),l("path",{d:"M512 411H65V210.37C65 188.597 82.598 171 104.371 171h305.92c17.4 0 32.71 11.334 37.681 28.036L512 411z",fill:"#FFB02C","p-id":"9922"},null),l("path",{d:"M918.673 883H104.327C82.578 883 65 865.42 65 843.668V335.332C65 313.58 82.578 296 104.327 296h814.346C940.422 296 958 313.58 958 335.332v508.336C958 865.32 940.323 883 918.673 883z",fill:"#FFCA28","p-id":"9923"},null)])]),l("div",{class:"text-gray-600 dark:text-gray-400 mt-2"},[C("\u8BF7\u70B9\u51FB\u4E0A\u4F20\u6216\u8005\u62D6\u52A8\u6587\u4EF6\u5230\u8BE5\u5904")]),this.type!=="manage"?l("div",{class:"mt-2 relative"},[l(c("a-upload"),{action:O(this.upload),accept:this.accept,headers:this.headers,onChange:this.fileChange,showFileList:!1},{"upload-button":()=>l(c("a-button"),{type:"primary",loading:this.progress.status},{default:()=>[this.progress.status?l("span",null,[C("\u4E0A\u4F20\u4E2D "),this.progress.progress,C("%")]):this.value?"\u5DF2\u4E0A\u4F20":"\u4E0A\u4F20\u6587\u4EF6"]})})]):l("div",{class:"mt-2 relative"},[l(c("a-button"),{type:"primary",loading:this.progress.status,onClick:this.fileManage},{default:()=>[this.progress.status?l("span",null,[C("\u4E0A\u4F20\u4E2D "),this.progress.progress,C("%")]):this.value?"\u5DF2\u4E0A\u4F20":"\u4E0A\u4F20\u6587\u4EF6"]})])])}}),Ci=L({props:{upload:{type:String,default:"upload"},fileUrl:{type:String,default:"fileManage"},value:{type:Array},format:{type:String},type:{type:String,default:"manage"}},data(){return{formatClone:"all,image,video,audio,document,other",accept:"*.*",list:[],drag:!1,visible:!1,modalValue:"",current:0,progress:{status:!1,progress:0},headers:{Accept:"application/json",Authorization:`${q().token||""}`}}},created(){this.list=this.value||[],this.format&&(this.formatClone=this.format),this.accept=ke(this.formatClone)},methods:{fileChange(e,t){t.status==="uploading"?(this.progress.status=!0,this.progress.progress=t.percent*100):t.status==="done"?(this.progress.status=!1,t.response.data.map(a=>{this.list.push({name:a.title,url:a.url})}),this.$emit("update:value",this.list)):t.status==="error"&&window.message.error(t.response.message||"\u4E0A\u4F20\u5931\u8D25")},fileManage(){window.fileManage({multiple:!0,type:this.formatClone,uploadUrl:this.upload,fileUrl:this.fileUrl}).then(e=>{e.map(t=>{this.list.push({name:t.title,url:t.url}),this.$emit("update:value",this.list)})})}},render(){return l("div",{class:"w-full"},[l(c("draggable"),{modelValue:this.list,"onUpdate:modelValue":e=>{this.$emit("update:value",e),this.list=e},onStart:this.drag=!0,onEnd:this.drag=!1,itemKey:"index",class:"rounded divide-y divide-gray-3 dark:divide-blackgray-3 overflow-hidden "},{item:e=>l("div",{class:"p-3 py-2 flex items-center justify-between text-sm bg-gray-100 hover:bg-gray-200 dark:bg-blackgray-1"},[l("div",{class:"w-0 flex-1 flex items-center text-gray-800 dark:text-gray-400"},[l(c("icon-file"),{class:"flex-shrink-0 "},null),l("span",{class:"ml-2 flex-1 w-0 truncate"},[e.element.name])]),l("div",{class:"ml-4 flex-shrink-0 flex gap-4"},[l(c("a-link"),{href:e.element.url,target:"_blank"},{default:()=>[C("\u4E0B\u8F7D")]}),l(c("a-link"),{status:"danger",onClick:()=>{this.list.splice(e.index,1)}},{default:()=>[C("\u5220\u9664")]})])]),footer:()=>this.type!=="manage"?l("div",null,[l(c("a-upload"),{action:O(this.upload),accept:this.accept,headers:this.headers,onChange:this.fileChange,multiple:!0,showFileList:!1},{"upload-button":()=>l("div",{class:"p-3 py-2 flex items-center justify-center cursor-pointer bg-gray-100 hover:bg-gray-200 dark:bg-blackgray-1 dark:hover:bg-blackgray-2 text-gray-600 dark:text-gray-400 "},[this.progress.status?l("div",null,[C("\u5DF2\u4E0A\u4F20 "),this.progress.progress,C("%")]):"\u4E0A\u4F20\u9644\u4EF6"])})]):l("div",{class:"p-3 py-2 flex items-center justify-center cursor-pointer bg-gray-100 hover:bg-gray-200 dark:bg-blackgray-1 dark:hover:bg-blackgray-2 text-gray-600 dark:text-gray-400 ",onClick:this.fileManage},[C("\u4E0A\u4F20\u9644\u4EF6")])})])}}),Fi=L({props:{upload:{type:String,default:"upload"},fileUrl:{type:String,default:"fileManage"},value:{type:Array},type:{type:String,default:"manage"}},data(){return{formatClone:"image",accept:"*.*",list:[],drag:!1,visible:!1,modalValue:"",current:0,progress:{status:!1,progress:0},headers:{Accept:"application/json",Authorization:`${q().token||""}`}}},created(){this.list=this.value||[],this.accept=ke(this.formatClone)},methods:{fileChange(e,t){t.status==="uploading"?(this.progress.status=!0,this.progress.progress=t.percent*100):t.status==="done"?(this.progress.status=!1,t.response.data.map(a=>{this.list.push(a.url)}),this.$emit("update:value",this.list)):t.status==="error"&&window.message.error(t.response.message||"\u4E0A\u4F20\u5931\u8D25")},fileManage(){window.fileManage({multiple:!0,type:this.formatClone,uploadUrl:this.upload,fileUrl:this.fileUrl}).then(e=>{e.map(t=>{this.list.push(t.url)})})}},render(){return l("div",null,[l(c("a-image-preview-group"),{visible:this.visible,"onUpdate:visible":e=>this.visible=e,current:this.current,"onUpdate:current":e=>this.current=e,infinite:!0,srcList:this.list},null),l(c("draggable"),{modelValue:this.list,"onUpdate:modelValue":e=>{this.$emit("update:value",e),this.list=e},onStart:this.drag=!0,onEnd:this.drag=!1,itemKey:"index",class:"flex gap-2 flex-wrap"},{item:e=>l("div",{class:"relative bg-gray-100  hover:bg-gray-200 dark:bg-blackgray-1 dark:hover:bg-blackgray-2  rounded bg-cover bg-center bg-no-repeat block flex items-end w-28 h-28",style:{backgroundSize:"90%",backgroundImage:`url(${e.element||"/service/image/placeholder/180/180/\u9009\u62E9\u56FE\u7247"})`}},[l("div",{class:"flex p-2 gap-2 w-full bg-white bg-opacity-80  dark:bg-blackgray-5 dark:bg-opacity-80"},[l("div",{class:"flex-grow flex justify-center text-center  hover:text-blue-600 cursor-pointer ",onClick:()=>{this.visible=!0,this.current=e.index}},[l(c("icon-eye"),null,null)]),l("div",{class:"flex-grow flex justify-center text-center hover:text-blue-600 cursor-pointer"},[l(c("icon-share-alt"),{type:"primary",ghost:!0,size:"small",onClick:()=>{window.appDialog.prompt({title:"\u66F4\u6539\u56FE\u7247\u5730\u5740",value:e.element}).then(t=>{this.list[e.index]=t})}},null)]),l("div",{class:"flex-grow flex justify-center text-center hover:text-blue-600 cursor-pointer"},[l(c("icon-delete"),{onClick:()=>{this.list.splice(e.index,1)}},null)])])]),footer:()=>this.type!=="manage"?l("div",{class:"relative w-28 h-28 rounded block "},[l(c("a-upload"),{action:O(this.upload),accept:this.accept,headers:this.headers,onChange:this.fileChange,multiple:!0,showFileList:!1,class:"block"},{"upload-button":()=>l("div",{class:"text-gray-600 dark:text-gray-400 absolute flex items-center justify-center w-full h-full bg-gray-100 hover:bg-gray-200 dark:bg-blackgray-1 dark:hover:bg-blackgray-2 rounded cursor-pointer text-center"},[this.progress.status?l("div",{class:"text-xl"},[C(" "),this.progress.progress,C("%")]):l("div",{class:"flex items-center flex-col justify-center "},[l(c("icon-upload"),{class:"text-2xl"},null),l("div",{class:"mt-2"},[C("\u4E0A\u4F20\u56FE\u7247")])])])})]):l("div",{class:"relative w-28 h-28 rounded block",onClick:this.fileManage},[l("div",{class:"text-gray-600 hover:text-blue-600 absolute flex items-center justify-center w-full h-full bg-gray-100  hover:bg-gray-200 dark:bg-blackgray-1 dark:hover:bg-blackgray-2 rounded cursor-pointer"},[l("div",{class:"flex items-center flex-col justify-center "},[l(c("icon-upload"),{class:"text-2xl"},null),l("div",{class:"mt-2 text-xs"},[C("\u4E0A\u4F20\u56FE\u7247")])])])])})])}}),Di=L({props:{value:{type:String,default:""},baseUrl:{type:String,default:window.location.origin?window.location.origin:""},disabled:{type:Boolean,default:!1},plugins:{type:[String,Array],default:"print preview searchreplace autolink directionality visualblocks visualchars image link media template code codesample table charmap hr pagebreak nonbreaking insertdatetime advlist lists wordcount imagetools textpattern help emoticons"},toolbar:{type:[String,Array],default:" code preview print | formatselect fontsizeselect lineheight | forecolor backcolor bold italic underline strikethrough  subscript superscript  removeformat |             alignleft aligncenter alignright alignjustify outdent indent | bullist numlist | pagebreak hr link table  |  image media  filemanage  codesample charmap emoticons"},upload:{type:String,default:"upload"}},data(){return{init:{language_url:`${this.baseUrl}/static/tinymce/langs/zh_CN.js`,language:"zh_CN",skin_url:`${this.baseUrl}/static/tinymce/skins/ui/`+(window.darkMode==="dark"?"oxide-dark":"oxide"),content_css:`${this.baseUrl}/static/tinymce/skins/content/${window.darkMode==="dark"?"dark":"default"}/content.css`,emoticons_database_url:`${this.baseUrl}/static/tinymce/emojis.min.js`,plugins:this.plugins,toolbar:this.toolbar,width:"100%",min_height:500,fontsize_formats:"12px 14px 16px 18px 24px 36px 48px 56px 72px",convert_urls:!1,relative_urls:!1,lineheight_formats:"0.5 0.8 1 1.2 1.5 1.75 2 2.5 3 4 5",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",branding:!1,resize:!1,elementpath:!1,content_style:"img {max-width:100%;}",paste_data_images:!0,images_upload_handler:(e,t,a)=>{var s,i;s=new XMLHttpRequest,s.withCredentials=!1,s.open("POST",O(this.upload)),s.onload=function(){let n;if(s.status!==200){a("HTTP Error: "+s.status);return}if(n=JSON.parse(s.responseText),!n||!n.data.length){a("Invalid JSON: "+s.responseText);return}n.data.map(o=>{t(o.url)})},i=new FormData,i.append("file",e.blob(),e.filename()),s.setRequestHeader("Accept","application/json"),s.setRequestHeader("Authorization",`${q().token||""}`),s.send(i)},setup:function(e){e.ui.registry.getAll().icons.filemanage||e.ui.registry.addIcon("filemanage",'<svg t="1620982539724" class="icon" viewBox="0 0 1204 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2147" width="22" height="22"><path d="M0.002 541.857c0-124.482 85.64-233.86 200.042-266.246C263.379 115.14 420.248 0 603.747 0c184.938 0 337.488 115.143 400.801 275.61 118.024 33.104 200.053 141.048 200.053 266.248 0 153.998-124.495 279.245-282.07 279.245-29.503 0-56.136-26.62-56.136-56.112 0-33.832 26.62-56.136 56.137-56.136 94.979 0 170.573-74.11 170.573-166.939 0-49.653-22.351-95.71-59.007-125.211l-10.07-9.41c-2.882-3.6-7.2-6.47-12.94-10.07-2.894-3.613-9.41-3.613-12.94-6.483h-3.6c-2.882-3.6-6.482-3.6-9.41-6.47h-3.6c-2.883 0-6.482-3.61-10.082-3.61-2.882 0-6.47 0-6.47-2.87h-9.41c-3.6 0-6.47 0-10.082-3.6h-26.562c-2.882-10.788-6.482-18.705-6.482-29.504-2.87 0-2.87-3.588-2.87-6.47-3.588-6.482-3.588-12.94-6.47-19.434 0-3.6-3.612-3.6-3.612-7.188-2.87-6.47-6.47-12.94-10.058-19.421v-6.482c-2.894-6.47-9.41-12.94-12.94-19.434-55.396-92.156-157.609-154.716-272.764-154.716-118.012 0-220.181 62.56-275.587 154.716l-9.41 19.434c0 2.164-1.448 2.164-2.154 4.317l-1.447 2.165-10.081 19.42v7.2l-9.34 19.435v6.446c-3.612 10.8-7.2 18.716-7.2 29.503H259.05c-2.87 3.6-6.47 3.6-9.34 3.6h-6.494c-2.87 2.164-4.306 2.87-5.035 2.87a1.341 1.341 0 0 1-2.153 0c-2.87 0-6.482 3.61-9.41 3.61h-6.47c-3.611 2.883-6.482 2.883-10.082 6.47h-3.587c-2.87 2.87-6.482 2.87-9.411 6.483h-3.6c-2.87 3.6-6.46 6.47-10.07 10.07-6.47 2.87-9.34 6.482-12.94 9.41-36.69 29.504-55.396 75.56-55.396 125.212 0 92.828 75.559 166.94 166.94 166.94 33.83 0 59.018 22.35 59.018 56.136 0 29.503-25.187 56.112-59.02 56.112C128.098 821.103 0.002 695.856 0.002 541.857zM377.792 728.9c0-16.552 6.47-28.786 12.94-39.573L561.293 502.31c10.8-10.788 25.88-16.552 42.467-16.552s29.504 5.764 43.173 16.552l166.938 187.04a54.972 54.972 0 0 1 16.551 39.573c0 29.503-25.186 55.42-59.006 55.42-16.55 0-28.786-8.636-39.585-19.423l-71.947-78.453v282.105c0 33.82-25.185 55.419-56.136 55.419-32.373 0-55.419-21.586-55.419-55.42V686.504l-71.9 78.44c-10.785 10.788-26.62 19.422-43.16 19.422-29.561 0-55.477-25.915-55.477-55.407z" p-id="2148"></path></svg>'),e.ui.registry.addButton("filemanage",{icon:"filemanage",tooltip:"\u6587\u4EF6\u7BA1\u7406\u5668",onAction:function(){window.fileManage({multiple:!0}).then(t=>{t.map(a=>{let s;switch(a.ext){case"png":case"jpg":case"jpeg":case"bmp":case"gif":s="<div><img src='"+a.url+"' alt='"+a.title+"' /></div>";break;case"mp4":case"ogm":case"ogv":case"webm":s="<div><video controls src='"+a.url+"'></video></div>";break;case"mp3":case"ogg":case"wav":case"acc":s="<div><audio controls src='"+a.url+"'></audio></div>";break;default:s="<div><a href='"+a.url+"' target='_blank'>"+a.title+"</a></div>"}e.insertContent(s)})})}})},toolbar_mode:"wrap",file_picker_callback:function(e,t,a){let s="all";a.filetype=="media"&&(s="video,audio"),a.filetype=="image"&&(s="image"),window.selectFile(!1,s).then(i=>{e(i.url)})},file_picker_types:"file image media"},content:this.value}},watch:{value(e){this.content=e},content(e){this.$emit("update:value",e)}},created(){},mounted(){Je.init({})},methods:{onClick(e){this.$emit("onClick",e,Je)},clear(){this.content=""}},render(){return l(Vt,{modelValue:this.content,"onUpdate:modelValue":e=>this.content=e,init:this.init,disabled:this.disabled,onClick:this.onClick},null)}}),_i=L({props:{key:{type:String,default:"id"},ajaxColumn:{type:Array},ajaxType:{type:Array},column:{type:Array},url:{type:String},value:{type:Array},number:{type:Number},option:{type:Boolean}},data(){return{dialog:null,filter:{query:""},loading:!0,columns:[],data:[],dataTable:[]}},watch:{},created(){let e=[];this.column.map(t=>{const a={title:t.name,dataIndex:t.key,render:null};t.type==="text"&&(a.render=(s,i)=>he.call({},{nodeName:"a-input","onUpdate:model-value":n=>{s.record[t.key]=n},modelValue:s.record[t.key]}).default()),t.type==="image"&&(a.render=(s,i)=>he.call({},{nodeName:"app-file","onUpdate:value":n=>{s.record[t.key]=n},value:s.record[t.key],image:!0,mini:!0,size:8,link:!1}).default()),e.push(a)}),this.option&&e.push({title:l("div",{class:"flex"},[l("div",{class:"flex-grow"},[C("\u64CD\u4F5C")]),(!this.number||this.data.length<this.number)&&l(c("a-link"),{class:"flex-none"},{default:()=>[l(c("icon-plus"),{onClick:this.onOpen},null)]})]),width:110,render:t=>l("div",{class:"flex gap-2"},[l(c("a-link"),{onClick:()=>{let a=this.data.findIndex(s=>t.record[this.key]===s[this.key]);if(a===0)return!1;this.data.splice(a-1,0,this.data.splice(a,1)[0]),this.$emit("update:value",this.data)}},{default:()=>[l(c("icon-arrow-up"),null,null)]}),l(c("a-link"),{onClick:()=>{let a=this.data.findIndex(s=>t.record[this.key]===s[this.key]);if(a+1===this.data.length)return!1;this.data.splice(a+1,0,this.data.splice(a,1)[0]),this.$emit("update:value",this.data)}},{default:()=>[l(c("icon-arrow-down"),null,null)]}),l(c("a-link"),{onClick:()=>{let a=this.data.findIndex(s=>t.record[this.key]===s[this.key]);this.data.splice(a,1),this.$emit("update:value",this.data)}},{default:()=>[l(c("icon-close"),null,null)]})])}),this.columns=e,this.init()},methods:{init(){const e=this.value.map(a=>a[this.key]).join(",");let t={};t[this.key]=e,e?E({url:O(this.url),data:t}).then(a=>{let s={};a.data.map(n=>{s[n[this.key]]=n});const i=this.value.map(n=>b(b({},n),s[n[this.key]]||{}));this.setData(i,!0),this.loading=!1}):this.loading=!1},setData(e,t){const a=this.data.map(n=>n[this.key]);let s=[],i=this.data.length;if(e.map(n=>{if(~a.indexOf(n[this.key]))return!1;const o={};o[this.key]=n[this.key],this.column.map(r=>{o[r.key]=n[r.key]||""}),s.push(o),i++}),!t&&this.number&&this.number<i)return window.message.warning("\u6700\u591A\u53EF\u9009\u62E9 "+this.number+" \u6761\u6570\u636E"),!1;this.data.push(...s),this.$emit("update:value",this.data)},onSave(e){this.setData(e)},onSearch(){this.pagination.page=1,this.getList(this.filter)},onOpen(){window.appDialogTable({url:this.url,column:this.ajaxColumn,key:this.key,type:this.ajaxType}).then(e=>{this.onSave(e)})}},render(){return l("div",{class:"w-full"},[l("div",{class:"overflow-x-auto w-full mb-2"},[l(c("a-table"),{stripe:!0,loading:this.loading,columns:this.columns,data:this.data,pagination:!1,class:"whitespace-nowrap"},null)])])}}),Si=L({props:{value:{type:String},placeholder:{type:String},colors:{type:Array}},data(){return{color:["#a2d9ff","#0099ff","#000b76","#5000ca","#e7008a","#ff5500","#00cba9","#ffd700","#f3f4f5","#273036"]}},created(){this.colors&&this.colors.length&&(this.color=this.colors)},methods:{onSelect(e){this.$emit("update:value",e)}},render(){return l(c("a-popover"),{position:"bl",trigger:"click",style:{padding:0}},{default:()=>l(c("a-input"),{modelValue:this.value,type:"text",placeholder:this.placeholder},{append:()=>l("div",{class:"rounded-full w-6 h-6 border ",style:{backgroundColor:this.value}},null)}),content:()=>l("div",{class:"flex flex-wrap pl-1 pr-0 py-0 gap-2 w-64"},[this.color.map(e=>l("div",{class:"w-7 h-7 rounded hover:shadow cursor-pointer",onClick:()=>{this.onSelect(e)},style:{backgroundColor:e}},null)),l("div",{class:"w-24"},[l(c("a-input"),{size:"small",placeholder:"",modelValue:this.value,"onUpdate:modelValue":this.onSelect},null)])])})}}),Ai=L({props:{value:{type:Array},onCreate:Function,min:Number,max:Number},data(){const e=this.value||[];return e.length||e.push(this.onAdd(0)),{list:e}},watch:{},methods:{onAdd(e){return this.onCreate?this.onCreate(e):""},onOpen(){this.show=!0}},render(){return l("div",{class:"flex gap-2 flex-col  w-full"},[this.list.length>0&&this.list.map((e,t)=>{var a,s;return l("div",{class:"flex gap-2 items-center"},[l("div",{class:"flex-grow"},[C(" "),((s=(a=this.$slots).default)==null?void 0:s.call(a,{index:t,value:this.list[t]}))||l(c("a-input"),{"model-value":this.list[t],"onUpdate:model-value":i=>this.list[t]=i},null)]),l("div",{class:"flex-none flex items-center gap-2"},[l(c("a-button"),{type:"secondary",shape:"circle",disabled:this.max&&this.list.length>=this.max,onClick:()=>{this.list.splice(t+1,0,this.onAdd(t+1)),this.$emit("update:value",this.list)}},{default:()=>[l(c("icon-plus"),null,null)]}),t>0&&l(c("a-button"),{shape:"circle",type:"secondary",status:"danger",disabled:this.min&&this.list.length<=this.min,onClick:()=>{this.list.splice(t,1),this.$emit("update:value",this.list)}},{default:()=>[l(c("icon-delete"),null,null)]})])])})])}});const fe=Math.PI,Ei=(e,t,a,s)=>{let i=6371e3,n=Math.cos(e*fe/180)*Math.cos(a*fe/180)*Math.cos((t-s)*fe/180),o=Math.sin(e*fe/180)*Math.sin(a*fe/180),r=n+o;return r>1&&(r=1),r<-1&&(r=-1),Math.acos(r)*i};var pt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAAXNSR0IArs4c6QAABVFJREFUaEPVmWtsFFUUx/9ntgUk1e5ui4lKK9idBaJWXolBRTGaKJgQi8YPohHjo+ysNAElUfkgfKiaoJAUd5b6iBofH4y0hkTRBCM+iQkvUQN0toIFNRF2ZqsEgXbnmNmmZHc7u3NnZpfATfbD7v2f/zm/uTN37r1LuMgbXeT1o6IAIfVgK1FgOkxqZkIziJtzF4hpgBgDkHiAOXvQUKbvr9SF8wVQ16VNGhfAYhDmAbgbwFWChf0B4HMwdp7NYuvJDvm4YNwYmWeAUEJTQFhFQIvX5LnBAfrB2GDEZdWLj2uAoKotJmAlAQu8JCwVw8AOBjZmFHmrG19XAOHEobUg6QU3CVxr2Vynx6etFY0TBgir2scA7hM19qnboivy/SIeQgBhVfsMwEIRwwpqtumKvMjJzxGgQU2tYHCXk1E1+gnUkVYim8p5lwVoUA89wpDeqUZxop4Ec1lamfZuKX1JgEY1NccE7xJNVE2dBJp7QonststREiCs9nUD9GQ1CxP35td1JdouDHAhXf3RokuNgu0IXFhXfxTBfhTGAAQ3Hg5K44ePAKgXH+Lzohw0z9RMyaycmsnPNgagIdG3jIne9lnSSQD7CZxbdTKoFYD1qfPjS8yPpuPRgllxDEBITfUS+F7PiZh7s1laPdgh9+d71HdpLYEArwdRm1dvBn1iKJGC+DEAYVVjHwkWGUpkW7n4kJpaSGDrze6p6YpcUHPBl1B3fzNlzd89OaP0VFfs52eS4IB0tdHeMjDqWQiQ6L+FyPzWEwDTzXo88oNIbDiRugnE34toizXM0nwj3vKdPYDa9yCBPnBvzEP6MF2KDvmMUGyXNj5cw/8CVCukzxMxeKmhRD+0B0hqzxLjJdemhD1GTJ7jJi6U1HYTY7abmNyMRnjOiMkvlxgB7SEC3nNrCuCorsgjG3jBFlY16z5uEpSfkzHwsKHI79sCBJPaLImxx62ppTdpeGomNsN6ATq2YPLAFIlrDjsKbQQmYXYmJu+1Bbiye9fE09n6QQA1rs2ZVuvxyCsiceFE6hkQrxfRFmmGJwQG6/9sn3vKFsD6sUHV9jAwy4M5iufoUh5e3zUE7E0rcsFzY/Mm1joJeN4LAIAfpUBt24n2KX/ZxTd2H7nCzA71ArjRiz8DLxqKvCY/1m4tNIMl2gfGOC9JcjFsrgNJv6IWO3PfhzAPbF7r60SDcJZMnpmORw+UBbA6w6r2JoDHPANUJ/AtXZEfL7a23Q8EN2kLpAC+qk4d3lzNLG7PrJB3CAHkRiHR1+Nn5eitzBJRzL16PLrErrfkntha/tbU4gtmf2effkGI0D88hLuKl+clp9H8hA3JVBsz9/gtwk88ES1JxyLWzGXbHA+2zst5aKnqBM5JHQFGZqW+LQDZ3oN+rm75WO7RlajjWawQwKTE33VZGrT2CTOrV3CB874A188/Hr/c2luXbUIAI7NSqgnEvwC4zMnUZ/8/YLpOj0eOivgIA1hmoe7+6ylrVuz/LbsCOSC1Gu0tP4sUb2lcAVgBwdf6bpUk+lo0gRudafJtmaei37iJcQ2Qg9j82w2Smd3nJpGT1pQCMzPLr/nJSVfc7wkg90y8oU3GEITuU8eiatGkPyEfc9TZCDwDWF6TPzp6yakTp89tLrwUMLFxwsRjDzT95yXW0zNglyicTG0H8x2uiiD6Uo9F7nQVU+kRyPcLq9qrAFYJFrRBV+SnBbVlZb5uoWLn3LIDtAZE9ntq5mGAO938jeoEWVGA3MO9WZsHk9YAfE9hcvoUEnfqy+WRXVqFWsUBRusKJbWlBMrd4wzebsRkDyd+zpT/Az/atkB5EtVoAAAAAElFTkSuQmCC",Ti=L({props:{ak:{type:String,default:()=>window.baiduMapAk||"diaBBBb4lASIa7p4fgYdFZT2NgYdAsOy"},value:Object,model:{type:String,default:"select"},defaultPoiKeyword:{type:String,default:""},poiListShow:Boolean},data(){return{loadMap:!1,selectPointInfo:{},searchLocalResult:[],searchStatus:!1,poiSearchReadus:1e3,poiFixedCenter:!1,poiKeyword:"",poiList:[],poiListSelect:-1,poiCenter:{lat:0,lng:0}}},async mounted(){var s,i,n;if(!this.ak)return console.error("\u767E\u5EA6\u5730\u56FE\u52A0\u8F7D\u9519\u8BEF \u672A\u914D\u7F6E\u5BC6\u94A5");window.BMapGL||(this.loadMap=!0,window.BMAP_PROTOCOL="https",window.BMapGL_loadScriptTime=new Date().getTime(),await W.pageLoad({script:["https://api.map.baidu.com/getscript?type=webgl&v=1.0&ak="+this.ak+"&services=&t=20220224113913"],css:["https://api.map.baidu.com/res/webgl/10/bmap.css"]},"form-map-baidump")),this.loadMap=!1,this.map=new BMapGL.Map(this.mapContainer);const e=new BMapGL.Geocoder;if(this.model==="poi"){this.poiKeyword=this.defaultPoiKeyword;const o=this.bdPoiSearch=new BMapGL.LocalSearch(this.map);o.disableAutoViewport(),o.disableFirstResultSelection(),o.setPageCapacity(100),o.setSearchCompleteCallback(r=>{this.poiList=r._pois.map(u=>{const p=Ei(u.point.lat,u.point.lng,r.center.lat,r.center.lng)|0;return $(b({},u),{distance:p,distanceText:p<1e3?`${p}m`:`${(p/1e3).toFixed(2)}km`})}).sort((u,p)=>u.distance-p.distance),e.getLocation(this.poiCenter,u=>{this.$emit("update:value",$(b(b({},u.point),u.addressComponents),{address:u.address,addressPois:u.surroundingPois,pois:r._pois}))})})}else this.map.addEventListener("click",o=>{this.map.panTo(o.latlng)});const t=()=>{const o=this.map.getCenter();!this.poiFixedCenter&&this.model==="poi"&&(this.poiCenter=o),e.getLocation(o,r=>{this.selectPointInfo=$(b(b({},r.point),r.addressComponents),{address:r.address,addressPois:r.surroundingPois}),this.model==="select"&&this.$emit("update:value",this.selectPointInfo)})};this.map.addEventListener("moveend",t),this.map.addEventListener("zoomend",t),this.map.enableInertialDragging(),this.map.enableScrollWheelZoom(),this.map.enableContinuousZoom(),this.map.enablePinchToZoom(),this.map.enableResizeOnCenter();const a=new BMapGL.LocationControl;this.map.addControl(a),((s=this.value)==null?void 0:s.lng)&&((i=this.value)==null?void 0:i.lat)?(this.model==="poi"&&(this.poiFixedCenter=!0,this.poiCenter={lng:+this.value.lng,lng:+this.value.lat},this.poiList=((n=this.value)==null?void 0:n.pios)||(this.bdPoiSearch.searchNearby(this.poiKeyword,this.poiCenter,this.poiSearchReadus),[])),this.map.centerAndZoom(new BMapGL.Point(+this.value.lng,+this.value.lat),16),t()):(this.map.centerAndZoom(new BMapGL.Point(112.945039,28.234063),15),t(),await je(500),a.startLocation())},destroyed(){},methods:{search(e){var a,s;(a=e.preventDefault)==null||a.call(e);const t=((s=e.target)==null?void 0:s.value)||e;if(this.model==="select"){if(!t)return;new BMapGL.LocalSearch(this.map,{renderOptions:{map:this.map}}).search(t)}else{if(!t){this.searchLocalResult=[];return}const i=new BMapGL.LocalSearch(this.map);this.searchStatus=!0,i.setSearchCompleteCallback(n=>{this.searchLocalResultOriginal=Object.fromEntries(n._pois.map(o=>[`${o.title} ${o.address}`,o])),this.searchLocalResult=n._pois.map(o=>`${o.title} ${o.address}`),this.searchStatus=!1}),i.search(t)}},selectLocalResult(e){const t=this.searchLocalResultOriginal[e].point;this.poiFixedCenter&&(this.poiCenter=t),this.map.centerAndZoom(t,15)},showPoiCenter(){var t,a;(t=this.poiCenterMarker)==null||t.remove(),(a=this.poiCenterCircle)==null||a.remove();const e=new BMapGL.Point(this.poiCenter.lng,this.poiCenter.lat);if(this.poiFixedCenter){const s={icon:new BMapGL.Icon(pt,new BMapGL.Size(48,48)),offset:new BMapGL.Size(0,-24)};this.poiCenterMarker=new BMapGL.Marker(e,s),this.map.addOverlay(this.poiCenterMarker)}this.poiCenterCircle=new BMapGL.Circle(e,this.poiSearchReadus,{strokeColor:"blue",strokeWeight:2,strokeOpacity:.5}),this.map.addOverlay(this.poiCenterCircle)},clickPoiListSelect(e){this.poiListSelect=e}},watch:{poiCenter(e){this.model==="poi"&&(this.poiListSelect=-1,this.bdPoiSearch.searchNearby(this.poiKeyword,e,this.poiSearchReadus),this.showPoiCenter())},poiFixedCenter(e){e||(this.poiCenter=this.map.getCenter()),this.showPoiCenter()},poiList(e){var t;(t=this.poiMarkers)==null||t.forEach(a=>a.remove()),this.poiMarkers=e.map((a,s)=>{const i=new BMapGL.Marker(new BMapGL.Point(a.point.lng,a.point.lat));return this.map.addOverlay(i),i.addEventListener("click",()=>{if(this.poiListSelect=s,this.popListRef){const n=this.popListRef.$el.children[0].children[0],o=n.children[s];this.popListRef.$el.children[0].scrollTo(0,xe(o,n).top)}}),i})},poiListSelect(e,t){var a,s,i,n;(i=(s=(a=this.poiMarkers[t])==null?void 0:a.getLabel())==null?void 0:s.remove)==null||i.call(s),(n=this.poiMarkers[e])==null||n.setLabel(new BMapGL.Label(this.poiList[e].title))}},render(){return l(R,null,[l("div",{className:"relative flex items-center justify-center h-96 w-full"},[l("div",{ref:e=>this.mapContainer=e,className:"w-full h-full"},null),this.loadMap&&l("div",{className:"absolute",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",marginTop:"-15px",color:"#3385FF"}},[l(c("a-spin"),null,null)]),l("div",{className:"absolute flex items-center justify-center",style:{top:"10px",left:"10px",right:"10px",zIndex:5}},[this.model==="select"?l(c("a-input-search"),{onPressEnter:this.search,onSearch:this.search,style:{width:"320px",backgroundColor:"#fff"},placeholder:"\u4F4D\u7F6E\u641C\u7D22"},null):l(R,null,[l(c("a-space"),null,{default:()=>[l(c("a-select"),{options:this.searchLocalResult,loading:this.searchStatus,onSearch:this.search,onChange:this.selectLocalResult,allowSearch:!0,filterOption:!1,showExtraOptions:!1,style:{width:"240px",backgroundColor:"#fff"},placeholder:"\u8F93\u5165\u4F4D\u7F6E\u5173\u952E\u5B57"},null),l(c("a-input"),{style:{width:"100px",backgroundColor:"#fff"},placeholder:"PIO\u5173\u952E\u8BCD","model-value":this.poiKeyword,"onUpdate:model-value":e=>this.poiKeyword=e},null),l(c("a-input"),{style:{width:"100px",backgroundColor:"#fff"},placeholder:"PIO\u534A\u5F84","model-value":this.poiSearchReadus,"onUpdate:model-value":e=>this.poiSearchReadus=e},null),l("div",null,[C("\u56FA\u5B9A\u4F4D\u7F6E")]),l(c("a-switch"),{"model-value":this.poiFixedCenter,"onUpdate:model-value":e=>this.poiFixedCenter=e},null)]})])]),!!Object.keys(this.selectPointInfo).length&&l("div",{className:"absolute flex items-center justify-center pl-2 pr-2",style:{bottom:"10px",right:"10px",backgroundColor:"#fff",height:"32px",borderRadius:"3px"}},[this.selectPointInfo.province,this.selectPointInfo.city,this.selectPointInfo.district,this.selectPointInfo.street,this.selectPointInfo.streetNumber]),!this.poiFixedCenter&&l("div",{className:"absolute",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)",marginTop:"-24px",color:"#3385FF"}},[l("img",{src:pt},null)])]),this.poiListShow&&this.model==="poi"&&l(c("a-list"),{maxHeight:400,data:this.poiList,hoverable:!0,ref:e=>this.popListRef=e},{item:({item:e,index:t})=>l(c("a-list-item"),{key:e.uid,style:{backgroundColor:t===this.poiListSelect?"rgb(242 243 245)":"#fff"},onClick:this.clickPoiListSelect.bind(this,t)},{actions:()=>l("a",{className:"flex items-center",href:e.detailUrl||"#",target:e.detailUrl?"_blank":"_self"},[l("span",{className:"text-xl"},[e.distanceText,C(" ")]),e.detailUrl&&l(c("icon-right"),{size:26},null)]),default:()=>l(c("a-list-item-meta"),{title:e.title+(e.phoneNumber?` ${e.phoneNumber}`:""),description:e.address},{avatar:()=>l(c("a-avatar"),{shape:"square"},{default:()=>[t+1]})})})})])}});function ft(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Ke(e)}var Mi=L({props:{title:{type:String},form:{type:Boolean,default:!1},back:{type:Boolean,default:!0},save:{type:Boolean,default:!0},submit:{type:Function},"submit-text":{type:String,default:"\u4FDD\u5B58"},formLoading:{type:Boolean,default:!1}},components:{Route:ht},data(){return{appInfo:window.appConfig,darkMode:localStorage.getItem("darkMode")==="dark"?"dark":"light",navList:[],userInfo:q(),notify:[],notifyNum:0,weather:{}}},methods:{getNotify(){window.dataNotify&&(this.notify=window.dataNotify.list,this.notifyNum=window.dataNotify.num)},readNotify(){x.emit("app-notify-read")},delNotify(){x.emit("app-notify-del")}},created(){Pe(e=>{this.weather=e}),x.add("app-notify",()=>{this.getNotify()})},mounted(){Qe.on(e=>{this.navList=e}),this.getNotify()},render(){var a,s,i,n,o,r;let e;const{navList:t}=this;return l("div",{class:"flex flex-col lg:h-screen"},[l("div",{class:"flex-none px-4 py-2 border-b border-gray-300 dark:border-blackgray-5 bg-white dark:bg-blackgray-4 shadow-sm  z-10"},[((s=(a=this.$slots).header)==null?void 0:s.call(a))||l("div",{class:"flex flex-row gap-2 items-center"},[l("div",{class:"flex-grow"},[l("div",{class:"text-base"},[this.appInfo.name]),this.userInfo.title&&l("div",{class:"text-gray-400 text-xs"},[this.userInfo.title])]),l("div",{class:"flex-none flex items-center gap-2"},[(n=(i=this.$slots).tools)==null?void 0:n.call(i),this.weather.city&&l("div",null,[l("a",{href:"http://www.weather.com.cn/",target:"_blank",class:"dark:hover:bg-blackgray-2 hover:bg-gray-100 p-2 rounded"},[this.weather.city,C(" "),this.weather.weather,C(" "),this.weather.temperature,C("\xB0")])]),l("div",null,[l(c("a-popover"),{title:"\u6D88\u606F\u901A\u77E5",contentStyle:{width:"300px"}},{default:()=>l(c("a-badge"),{dot:!0,count:this.notifyNum,offset:[-4,5]},{default:()=>[l(c("a-button"),{shape:"round",type:"text",style:{fontSize:"20px"}},{icon:()=>l(c("icon-notification"),null,null)})]}),content:()=>{let u;return this.notify.length?l("div",null,[l(c("a-list"),{maxHeight:"300"},ft(u=this.notify.map(p=>l(c("a-list-item"),null,{default:()=>[l(c("a-badge"),{count:p.read?0:1,dot:!0,offset:[8,0]},{default:()=>[p.message]})]})))?u:{default:()=>[u]}),l("div",{class:"mt-2 flex gap-2 justify-end"},[l(c("a-link"),{onClick:this.readNotify},{default:()=>[C("\u4E00\u952E\u5DF2\u8BFB")]}),l(c("a-link"),{onClick:this.delNotify},{default:()=>[C("\u6E05\u7A7A\u6D88\u606F")]})])]):l(c("a-empty"),{description:"\u6682\u65E0\u901A\u77E5\u6D88\u606F"},null)}})]),l("div",null,[l(c("a-button"),{type:"text",shape:"round",style:{fontSize:"20px"},onClick:()=>{this.darkMode=this.darkMode==="dark"?"light":"dark",x.emit("switch-dark",this.darkMode)}},{icon:()=>this.darkMode==="light"?l(c("icon-sun-fill"),null,null):l(c("icon-moon-fill"),null,null)})]),l("div",null,[l(c("a-dropdown"),null,{default:()=>l("div",{class:"flex items-center gap-2 px-2 cursor-pointer"},[l(c("a-avatar"),{size:"28",src:this.userInfo.avatar},{default:()=>[!this.userInfo.avatar&&this.userInfo.avatar_text]}),l("div",null,[l("div",null,[this.userInfo.showname]),this.userInfo.subname&&l("div",{class:"text-gray-400"},[this.userInfo.subname])])]),content:()=>l("div",null,[l(c("a-doption"),{onClick:()=>{window.open("/")}},{default:()=>[C("\u8FD4\u56DE\u9996\u9875")]}),l(c("a-doption"),{onClick:()=>{F.push("/"+Y()+"/userInfo/page")}},{default:()=>[C("\u4FEE\u6539\u8D44\u6599")]}),l(c("a-doption"),{onClick:()=>{sa()}},{default:()=>[C("\u9000\u51FA\u767B\u5F55")]})])})])])])]),l("div",{class:"flex-grow bg-gray-100 dark:bg-blackgray-2 overflow-y-auto app-scrollbar"},[l("div",{class:"p-4 pb-0 flex  items-center"},[l("div",{class:"flex-grow"},[l(c("a-breadcrumb"),null,ft(e=t.map((u,p)=>l(c("a-breadcrumb-item"),null,{default:()=>[u.name]})))?e:{default:()=>[e]})]),this.form&&l("div",{class:"flex-none flex gap-2"},[this.back&&l(c("route"),{type:"back"},{default:()=>[l(c("a-button"),{type:"outline"},{default:()=>[C("\u8FD4\u56DE")]})]}),this.save&&l(c("a-button"),{type:"primary","html-type":this.submit?"button":"submit",onClick:this.submit,loading:this.formLoading},{default:()=>[this.submitText]})])]),(r=(o=this.$slots).default)==null?void 0:r.call(o)])])}}),Li=L({props:{title:{type:String}},data(){return{}},render(){var e,t,a,s;return l("div",null,[l("div",{class:"arco-modal-header"},[l("div",{class:"arco-modal-title"},[this.title]),l(c("route"),{type:"back",calss:"arco-modal-close-btn"},{default:()=>[l("span",{class:"arco-icon-hover arco-icon-hover-size-medium"},[l(c("icon-close"),null,null)])]})]),(t=(e=this.$slots).default)==null?void 0:t.call(e),(s=(a=this.$slots).footer)==null?void 0:s.call(a)])}});const $e=e=>typeof e=="number"?!0:/^[\d.]+$/g.test(e),gt=e=>$e(e)?Number(e):e;var Ni={isNumber:$e,strToNumber:gt},Bi=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",isNumber:$e,strToNumber:gt,default:Ni});class ji{constructor(){G(this,"ws",null);G(this,"callbacks",[]);G(this,"callbackTypes",{});G(this,"reconnectCallbacks",[]);st(t=>{t?this.init():this.unInit()})}init(){var a;const t=(a=appConfig==null?void 0:appConfig.socket)==null?void 0:a.api;if(!!t)try{const s=this.ws=new WebSocket(`${it().replace("https://","wss://").replace("http://","ws://")}${t}`);s.addEventListener("message",i=>{try{const n=JSON.parse(i.data);this.callbacks.forEach(o=>o(n)),n.type&&this.callbackTypes[n.type]&&this.callbackTypes[n.type].forEach(o=>o(n)),n.type==="login"&&this.emitReconnect(!0)}catch(n){console.log("\u7A0B\u5E8F\u5904\u7406\u9519\u8BEF\u6216\u8005\u4E0D\u662FJSON\u6D88\u606F",n)}}),s.addEventListener("open",()=>{const{token:i=""}=q();this.send({type:"login",data:i.replace("Bearer ","")})}),s.addEventListener("close",i=>{i.code!==1e3&&this.reconnect(),this.emitReconnect()}),s.addEventListener("error",i=>{console.log("\u94FE\u63A5\u9519\u8BEF",i),this.reconnect(),this.emitReconnect()})}catch(s){console.log("\u94FE\u63A5\u521D\u59CB\u5316\u9519\u8BEF",s),this.reconnect(),this.emitReconnect()}}unInit(){var t,a;(a=(t=this.ws).close)==null||a.call(t,1e3),this.ws=null,this.callbacks.splice(0),this.callbackTypes={}}reconnect(){console.log("\u94FE\u63A5\u65AD\u5F00 \u5C06\u5728\u7A0D\u540E\u91CD\u8BD5"),this.reconnectTimer&&clearTimeout(this.reconnectTimer),this.reconnectTimer=setTimeout(()=>{var t,a;((t=this.ws)==null?void 0:t.readyState)===WebSocket.CLOSING||((a=this.ws)==null?void 0:a.readyState)===WebSocket.CLOSED?(console.log("\u6B63\u5728\u91CD\u8FDE"),this.init()):console.log("\u4E0D\u7B26\u5408\u91CD\u8FDE\u6761\u4EF6")},5e3)}emitReconnect(t=!1){this.reconnectCallbacks.forEach(a=>a(t))}onReconnect(t){return this.reconnectCallbacks.push(t),{destroy:()=>{const a=this.reconnectCallbacks.findIndex(s=>s===t);~a&&this.reconnectCallbacks.splice(a,1)}}}type(t){const a=[];return{send:(s,i="")=>{this.send({type:t,message:i,data:s})},sendMessage:(s="")=>{this.send({type:t,message:s})},on:s=>{a.push(s);const i=this.callbackTypes[t]=this.callbackTypes[t]||[];return i.push(s),{destroy:()=>{const n=i.findIndex(o=>o===s);~n&&i.splice(n,1),i.length||delete this.callbackTypes[t]}}},destroy:()=>{a.forEach(s=>{var o;const i=this.callbackTypes[t],n=(o=i==null?void 0:i.findIndex)==null?void 0:o.call(i,r=>s===r);i&&~n&&i.splice(n,1),i.length||delete this.callbackTypes[t]})}}}send(t){var a;((a=this.ws)==null?void 0:a.readyState)===WebSocket.OPEN&&this.ws.send(JSON.stringify(t))}on(t){return this.callbacks.push(t),{destroy:()=>{const a=this.callbacks.findIndex(s=>s===t);~a&&this.callbacks.splice(a,1)}}}off(){this.callbacks.splice(0)}}var Pi=new ji;window.dux={object:Zt,date:dt,util:ua,string:Bi,router:ta,global:ii,request:oa,socket:Pi,qs:Z};var mt={light:{red:["#FFECE8","#FDCDC5","#FBACA3","#F98981","#F76560","#F53F3F","#CB272D","#A1151E","#770813","#4D000A"],orangered:["#FFF3E8","#FDDDC3","#FCC59F","#FAAC7B","#F99057","#F77234","#CC5120","#A23511","#771F06","#4D0E00"],orange:["#FFF7E8","#FFE4BA","#FFCF8B","#FFB65D","#FF9A2E","#FF7D00","#D25F00","#A64500","#792E00","#4D1B00"],gold:["#FFFCE8","#FDF4BF","#FCE996","#FADC6D","#F9CC45","#F7BA1E","#CC9213","#A26D0A","#774B04","#4D2D00"],yellow:["#FEFFE8","#FEFEBE","#FDFA94","#FCF26B","#FBE842","#FADC19","#CFAF0F","#A38408","#785D03","#4D3800"],lime:["#FCFFE8","#EDF8BB","#DCF190","#C9E968","#B5E241","#9FDB1D","#7EB712","#5F940A","#437004","#2A4D00"],green:["#E8FFEA","#AFF0B5","#7BE188","#4CD263","#23C343","#00B42A","#009A29","#008026","#006622","#004D1C"],cyan:["#E8FFFB","#B7F4EC","#89E9E0","#5EDFD6","#37D4CF","#14C9C9","#0DA5AA","#07828B","#03616C","#00424D"],blue:["#E8F7FF","#C3E7FE","#9FD4FD","#7BC0FC","#57A9FB","#3491FA","#206CCF","#114BA3","#063078","#001A4D"],arcoblue:["#E8F3FF","#BEDAFF","#94BFFF","#6AA1FF","#4080FF","#165DFF","#0E42D2","#072CA6","#031A79","#000D4D"],purple:["#F5E8FF","#DDBEF6","#C396ED","#A871E3","#8D4EDA","#722ED1","#551DB0","#3C108F","#27066E","#16004D"],pinkpurple:["#FFE8FB","#F7BAEF","#F08EE6","#E865DF","#E13EDB","#D91AD9","#B010B6","#8A0993","#650370","#42004D"],magenta:["#FFE8F1","#FDC2DB","#FB9DC7","#F979B7","#F754A8","#F5319D","#CB1E83","#A11069","#77064F","#4D0034"],gray:["#f7f8fa","#f2f3f5","#e5e6eb","#c9cdd4","#a9aeb8","#86909c","#6b7785","#4e5969","#272e3b","#1d2129"]},dark:{red:["#4D000A","#770611","#A1161F","#CB2E34","#F54E4E","#F76965","#F98D86","#FBB0A7","#FDD1CA","#FFF0EC"],orangered:["#4D0E00","#771E05","#A23714","#CC5729","#F77E45","#F9925A","#FAAD7D","#FCC6A1","#FDDEC5","#FFF4EB"],orange:["#4D1B00","#793004","#A64B0A","#D26913","#FF8D1F","#FF9626","#FFB357","#FFCD87","#FFE3B8","#FFF7E8"],gold:["#4D2D00","#774B04","#A26F0F","#CC961F","#F7C034","#F9CC44","#FADC6C","#FCE995","#FDF4BE","#FFFCE8"],yellow:["#4D3800","#785E07","#A38614","#CFB325","#FAE13C","#FBE94B","#FCF374","#FDFA9D","#FEFEC6","#FEFFF0"],lime:["#2A4D00","#447006","#629412","#84B723","#A8DB39","#B8E24B","#CBE970","#DEF198","#EEF8C2","#FDFFEE"],green:["#004D1C","#046625","#0A802D","#129A37","#1DB440","#27C346","#50D266","#7EE18B","#B2F0B7","#EBFFEC"],cyan:["#00424D","#06616C","#11838B","#1FA6AA","#30C9C9","#3FD4CF","#66DFD7","#90E9E1","#BEF4ED","#F0FFFC"],blue:["#001A4D","#052F78","#134CA3","#2971CF","#469AFA","#5AAAFB","#7DC1FC","#A1D5FD","#C6E8FE","#EAF8FF"],arcoblue:["#000D4D","#041B79","#0E32A6","#1D4DD2","#306FFF","#3C7EFF","#689FFF","#93BEFF","#BEDAFF","#EAF4FF"],purple:["#16004D","#27066E","#3E138F","#5A25B0","#7B3DD1","#8E51DA","#A974E3","#C59AED","#DFC2F6","#F7EDFF"],pinkpurple:["#42004D","#650370","#8A0D93","#B01BB6","#D92ED9","#E13DDB","#E866DF","#F092E6","#F7C1F0","#FFF2FD"],magenta:["#4D0034","#770850","#A1176C","#CB2B88","#F545A6","#F756A9","#F97AB8","#FB9EC8","#FDC3DB","#FFE8F1"],gray:["#f7f8fa","#f2f3f5","#e5e6eb","#c9cdd4","#a9aeb8","#86909c","#6b7785","#4e5969","#272e3b","#1d2129"]}};const Oi=Object.fromEntries(Object.keys(mt.light).map(e=>[e,Object.fromEntries(mt.light[e].map((t,a)=>[a===0?50:a*100,t]))]));Rt({darkMode:"class",theme:{extend:{colors:b({blackgray:{1:"#373739",2:"#313132",3:"#2a2a2b",4:"#232324",5:"#17171a"}},Oi)}}});window.Vue=Ht;window.NProgress=qt;const S=window.vueApp=me(Rs);S.use(ve);S.use(ye);S.use(Kt);window.NProgress.configure({easing:"ease",speed:500,showSpinner:!1,trickleSpeed:200,minimum:.3});S.use(Gt);S.component("route",ht);S.component("rich-text",fi);S.component("node-create",ot);S.component("icon",yi);S.component("app-form",ri);S.component("app-table",li);S.component("widget-tree",vi);S.component("app-select",wi);S.component("app-tree-select",bi);S.component("app-cascader",xi);S.component("app-file",ki);S.component("app-files",Ci);S.component("app-images",Fi);S.component("app-editor",Di);S.component("app-choice",_i);S.component("app-color",Si);S.component("app-map",Ti);S.component("app-dynamic-data",Ai);S.component("app-layout",Mi);S.component("app-dialog",Li);S.component("draggable",Jt);S.component("json-viewer",Yt);S.mount("#duxravel-static");
